components:
  schemas:
    AdminGlobalUserItem:
      description: Global user with list of tenants they belong to.
      properties:
        email:
          anyOf:
          - type: string
          - type: 'null'
          title: Email
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        root_admin:
          default: false
          title: Root Admin
          type: boolean
        tenants:
          items:
            $ref: '#/components/schemas/TenantRef'
          title: Tenants
          type: array
        user_id:
          title: User Id
          type: string
      required:
      - user_id
      - email
      - name
      - tenants
      title: AdminGlobalUserItem
      type: object
    AdminTenantListItem:
      description: 'Admin list item: tenant id, name, and user count for list views.'
      properties:
        id:
          format: uuid
          title: Id
          type: string
        name:
          title: Name
          type: string
        user_count:
          title: User Count
          type: integer
      required:
      - id
      - name
      - user_count
      title: AdminTenantListItem
      type: object
    AdminToolListItem:
      description: Tool list item for admin global tools catalog (Phase 3).
      properties:
        category_name:
          default: uncategorized
          title: Category Name
          type: string
        description:
          default: ''
          title: Description
          type: string
        enabled_tenant_names:
          default: []
          items:
            type: string
          title: Enabled Tenant Names
          type: array
        id:
          title: Id
          type: string
        name:
          title: Name
          type: string
        slug_id:
          title: Slug Id
          type: string
        status:
          title: Status
          type: string
      required:
      - id
      - name
      - slug_id
      - status
      title: AdminToolListItem
      type: object
    AdminToolTenantRow:
      description: Tenant and its status for this tool (for admin tool detail).
      properties:
        tenant_id:
          title: Tenant Id
          type: string
        tenant_name:
          title: Tenant Name
          type: string
        tenant_tool_status:
          title: Tenant Tool Status
          type: string
      required:
      - tenant_id
      - tenant_name
      - tenant_tool_status
      title: AdminToolTenantRow
      type: object
    AdminUpdateUserNameRequest:
      description: Request body for PATCH admin users/:user_id (name only).
      properties:
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
      title: AdminUpdateUserNameRequest
      type: object
    AgentConfigCreate:
      description: Create a new agent config.
      properties:
        context_tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: List of tag slug_ids (e.g., 'data/analyze_data', 'results/visualize_and_present')
            that determine which tools are available. Omit (null) to auto-derive from
            tool_assignments; pass an explicit empty list [] to grant access to all
            tools.
          title: Context Tags
        instructions:
          anyOf:
          - type: string
          - type: 'null'
          title: Instructions
        model:
          default: gpt-4-turbo
          title: Model
          type: string
        name:
          title: Name
          type: string
        temperature:
          default: 0.7
          maximum: 2.0
          minimum: 0.0
          title: Temperature
          type: number
        tool_assignments:
          default: []
          items:
            $ref: '#/components/schemas/AgentConfigToolAssignment'
          title: Tool Assignments
          type: array
      required:
      - name
      title: AgentConfigCreate
      type: object
    AgentConfigResponse:
      description: Agent config response with tools.
      properties:
        context_tags:
          description: List of tag slug_ids that determine which tools are available.
          items:
            type: string
          title: Context Tags
          type: array
        created_at:
          format: date-time
          title: Created At
          type: string
        id:
          format: uuid
          title: Id
          type: string
        instructions:
          anyOf:
          - type: string
          - type: 'null'
          title: Instructions
        model:
          title: Model
          type: string
        name:
          title: Name
          type: string
        status:
          title: Status
          type: string
        supports_extended_thinking:
          default: false
          description: Whether the agent's default model supports extended thinking.
          title: Supports Extended Thinking
          type: boolean
        temperature:
          title: Temperature
          type: number
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        tools:
          items:
            additionalProperties: true
            type: object
          title: Tools
          type: array
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - tenant_id
      - name
      - model
      - temperature
      - instructions
      - status
      - created_at
      - updated_at
      title: AgentConfigResponse
      type: object
    AgentConfigToolAssignment:
      description: 'Tool assignment for an agent config.


        Uses tenant_tool_id to ensure tenant isolation - only tools enabled

        for the tenant (via TenantTool) can be assigned to agent configs.'
      properties:
        enabled:
          default: true
          title: Enabled
          type: boolean
        order:
          description: Order in tool list (0-indexed)
          title: Order
          type: integer
        tenant_tool_id:
          description: ID of the TenantTool association (ensures tenant isolation)
          format: uuid
          title: Tenant Tool Id
          type: string
      required:
      - tenant_tool_id
      - order
      title: AgentConfigToolAssignment
      type: object
    AgentConfigUpdate:
      description: Update an existing agent config.
      properties:
        context_tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          description: List of tag slug_ids (e.g., 'data/analyze_data', 'results/visualize_and_present')
            that determine which tools are available.
          title: Context Tags
        instructions:
          anyOf:
          - type: string
          - type: 'null'
          title: Instructions
        model:
          anyOf:
          - type: string
          - type: 'null'
          title: Model
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        temperature:
          anyOf:
          - maximum: 2.0
            minimum: 0.0
            type: number
          - type: 'null'
          title: Temperature
        tool_assignments:
          anyOf:
          - items:
              $ref: '#/components/schemas/AgentConfigToolAssignment'
            type: array
          - type: 'null'
          title: Tool Assignments
      title: AgentConfigUpdate
      type: object
    AnalyticsBucketResponse:
      additionalProperties: true
      description: A single time bucket with aggregated metrics payload.
      properties:
        bucket_start:
          description: Start of bucket in UTC (ISO format)
          format: date-time
          title: Bucket Start
          type: string
        bucket_type:
          description: '''hour'', ''day'', ''week'', ''month'', or ''year'''
          title: Bucket Type
          type: string
        payload:
          additionalProperties: true
          description: Aggregated metrics for this bucket
          title: Payload
          type: object
      required:
      - bucket_start
      - bucket_type
      title: AnalyticsBucketResponse
      type: object
    AnalyticsMeta:
      description: Metadata for the analytics response (scope and request params).
      properties:
        analyticable_id:
          description: ''''' for global, tenant UUID for tenant'
          title: Analyticable Id
          type: string
        analyticable_type:
          description: '''global'' or ''tenant'''
          title: Analyticable Type
          type: string
        cache_ttl_minutes:
          description: Cache TTL used for this request
          title: Cache Ttl Minutes
          type: integer
        domain:
          description: Analytics domain, e.g. 'chats'
          title: Domain
          type: string
        forced_recompute:
          description: Whether force_recompute was requested
          title: Forced Recompute
          type: boolean
        from:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: Requested range start (optional)
          title: From
        to:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: Requested range end (optional)
          title: To
      required:
      - domain
      - analyticable_type
      - analyticable_id
      - cache_ttl_minutes
      - forced_recompute
      title: AnalyticsMeta
      type: object
    AnalyticsResponse:
      description: 'Admin analytics API response: time series of buckets + meta.'
      properties:
        buckets:
          items:
            $ref: '#/components/schemas/AnalyticsBucketResponse'
          title: Buckets
          type: array
        meta:
          $ref: '#/components/schemas/AnalyticsMeta'
      required:
      - meta
      title: AnalyticsResponse
      type: object
    Body_upload_file_api_v1_storage_files_upload_post:
      properties:
        file:
          format: binary
          title: File
          type: string
      required:
      - file
      title: Body_upload_file_api_v1_storage_files_upload_post
      type: object
    BrowseResponse:
      description: Response for browsing directory contents.
      properties:
        items:
          description: List of files and directories
          items:
            $ref: '#/components/schemas/StorageItem'
          title: Items
          type: array
        path:
          description: Current directory path
          title: Path
          type: string
      required:
      - path
      - items
      title: BrowseResponse
      type: object
    ChatMessageResponse:
      description: Chat message response.
      properties:
        content:
          anyOf:
          - type: string
          - type: 'null'
          title: Content
        content_type:
          default: text
          title: Content Type
          type: string
        conversation_id:
          format: uuid
          title: Conversation Id
          type: string
        created_at:
          format: date-time
          title: Created At
          type: string
        id:
          format: uuid
          title: Id
          type: string
        meta:
          additionalProperties: true
          title: Meta
          type: object
        role:
          title: Role
          type: string
        status:
          default: pending
          description: 'Message lifecycle status: pending|processing|completed. User
            messages are always completed. Assistant/tool messages follow lifecycle.'
          title: Status
          type: string
        tool_call_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Tool Call Id
        tool_calls:
          anyOf:
          - items:
              additionalProperties: true
              type: object
            type: array
          - type: 'null'
          title: Tool Calls
      required:
      - id
      - conversation_id
      - role
      - content
      - tool_calls
      - tool_call_id
      - meta
      - created_at
      title: ChatMessageResponse
      type: object
    ClientCapabilities:
      description: 'Client-supplied capabilities; stored in conversation_set.meta
        and passed to tools/list and tools/call.


        Capabilities are per-client (not per-user). client_slug_id identifies the
        client for caching:

        when capabilities change, the client should bump the slug (e.g. lium_web_client-20260130)
        so

        the tools/list cache is missed appropriately.'
      properties:
        client_slug_id:
          anyOf:
          - type: string
          - type: 'null'
          description: Client identifier for caching (e.g. lium_web_client-20260130).
            When capabilities change, change this to miss cache.
          title: Client Slug Id
        visualization:
          anyOf:
          - $ref: '#/components/schemas/VisualizationCapabilities'
          - type: 'null'
          description: Visualization schemas the client can render (for client_visualizer).
      title: ClientCapabilities
      type: object
    ConversationSetCreate:
      description: Create a new conversation set.
      properties:
        agent_config_id:
          format: uuid
          title: Agent Config Id
          type: string
        client_capabilities:
          $ref: '#/components/schemas/ClientCapabilities'
          description: Client capabilities (e.g. visualization.schemas for client_visualizer);
            stored in meta for tools/list and tools/call.
        dataset_ids:
          description: List of dataset IDs to use (stored in meta.dataset_ids)
          items:
            type: string
          title: Dataset Ids
          type: array
        external_storage_ids:
          description: List of external storage IDs to use
          items:
            type: string
          title: External Storage Ids
          type: array
        storage_folder_paths:
          description: List of tenant storage folder paths to use
          items:
            type: string
          title: Storage Folder Paths
          type: array
        title:
          anyOf:
          - type: string
          - type: 'null'
          title: Title
      required:
      - agent_config_id
      - client_capabilities
      title: ConversationSetCreate
      type: object
    ConversationSetResponse:
      description: Conversation Set response.
      properties:
        agent_config_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          title: Agent Config Id
        created_at:
          format: date-time
          title: Created At
          type: string
        dataset_ids:
          items:
            type: string
          title: Dataset Ids
          type: array
        external_storage_ids:
          items:
            type: string
          title: External Storage Ids
          type: array
        id:
          format: uuid
          title: Id
          type: string
        last_assistant_message_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: Updated-at of the latest assistant message in this conversation
            set.
          title: Last Assistant Message At
        last_assistant_message_preview:
          anyOf:
          - type: string
          - type: 'null'
          description: Truncated content of the latest assistant message in this conversation
            set.
          title: Last Assistant Message Preview
        meta:
          additionalProperties: true
          title: Meta
          type: object
        status:
          title: Status
          type: string
        storage_folder_paths:
          items:
            type: string
          title: Storage Folder Paths
          type: array
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        title:
          anyOf:
          - type: string
          - type: 'null'
          title: Title
        updated_at:
          format: date-time
          title: Updated At
          type: string
        user_id:
          format: uuid
          title: User Id
          type: string
      required:
      - id
      - tenant_id
      - user_id
      - title
      - status
      - created_at
      - updated_at
      title: ConversationSetResponse
      type: object
    ConversationSetUpdate:
      description: Update an existing conversation set.
      properties:
        dataset_ids:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Dataset Ids
        external_storage_ids:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: External Storage Ids
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        storage_folder_paths:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Storage Folder Paths
        title:
          anyOf:
          - type: string
          - type: 'null'
          title: Title
      title: ConversationSetUpdate
      type: object
    ConversationSummaryRequest:
      description: Optional request controls for explicit summary generation.
      properties:
        detail_level:
          anyOf:
          - enum:
            - concise
            - standard
            - detailed
            type: string
          - type: 'null'
          description: Summary detail level preset.
          title: Detail Level
        model_override:
          anyOf:
          - type: string
          - type: 'null'
          description: Optional model ID override for this summary request.
          title: Model Override
      title: ConversationSummaryRequest
      type: object
    ConversationSummaryRequestResponse:
      description: Response for explicit summary generation requests.
      properties:
        conversation_set_id:
          format: uuid
          title: Conversation Set Id
          type: string
        requested:
          description: True when a new background summary request was enqueued.
          title: Requested
          type: boolean
        summary:
          anyOf:
          - type: string
          - type: 'null'
          description: Generated summary text for the target conversation slice.
          title: Summary
        summary_error:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Structured diagnostics for summary generation failures.
          title: Summary Error
        summary_request:
          anyOf:
          - $ref: '#/components/schemas/ConversationSummaryRequest'
          - type: 'null'
          description: Most recent explicit summary request options.
        summary_requested_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: When summary generation was requested (ISO timestamp).
          title: Summary Requested At
        summary_status:
          anyOf:
          - type: string
          - type: 'null'
          description: 'Summary lifecycle status: pending|ready|failed.'
          title: Summary Status
        summary_updated_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: When summary status was last updated (ISO timestamp).
          title: Summary Updated At
        target_conversation_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Conversation slice currently targeted for summary generation.
          title: Target Conversation Id
      required:
      - conversation_set_id
      - requested
      title: ConversationSummaryRequestResponse
      type: object
    ConversationSummaryResponse:
      description: Summary state for a conversation set.
      properties:
        conversation_set_id:
          format: uuid
          title: Conversation Set Id
          type: string
        summary:
          anyOf:
          - type: string
          - type: 'null'
          description: Generated summary text for the target conversation slice.
          title: Summary
        summary_error:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Structured diagnostics for summary generation failures.
          title: Summary Error
        summary_request:
          anyOf:
          - $ref: '#/components/schemas/ConversationSummaryRequest'
          - type: 'null'
          description: Most recent explicit summary request options.
        summary_requested_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: When summary generation was requested (ISO timestamp).
          title: Summary Requested At
        summary_status:
          anyOf:
          - type: string
          - type: 'null'
          description: 'Summary lifecycle status: pending|ready|failed.'
          title: Summary Status
        summary_updated_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: When summary status was last updated (ISO timestamp).
          title: Summary Updated At
        target_conversation_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Conversation slice currently targeted for summary generation.
          title: Target Conversation Id
      required:
      - conversation_set_id
      title: ConversationSummaryResponse
      type: object
    CopyRequest:
      description: Request to copy a file or directory.
      properties:
        destination:
          description: Destination path
          title: Destination
          type: string
        source:
          description: Source path
          title: Source
          type: string
      required:
      - source
      - destination
      title: CopyRequest
      type: object
    CopyResponse:
      description: Response after copying a file or directory.
      properties:
        destination:
          title: Destination
          type: string
        source:
          title: Source
          type: string
      required:
      - source
      - destination
      title: CopyResponse
      type: object
    CreateJobRequest:
      description: 'Request to create/start a new job.


        Used by UI/agents to start tool executions.'
      properties:
        limit:
          anyOf:
          - minimum: 1.0
            type: integer
          - type: 'null'
          description: Optional limit for data transformers
          title: Limit
        parameters:
          additionalProperties: true
          description: Tool-specific parameters
          title: Parameters
          type: object
        tenant_tool_id:
          description: TenantTool ID - which tool to execute
          format: uuid
          title: Tenant Tool Id
          type: string
      required:
      - tenant_tool_id
      title: CreateJobRequest
      type: object
    CurrentUserResponse:
      description: Response model for current user information.
      properties:
        email:
          title: Email
          type: string
        id:
          format: uuid
          title: Id
          type: string
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        root_admin:
          default: false
          title: Root Admin
          type: boolean
        tenants:
          items:
            $ref: '#/components/schemas/UserTenantMembership'
          title: Tenants
          type: array
      required:
      - id
      - email
      - name
      - tenants
      title: CurrentUserResponse
      type: object
    DataTransformerRetryContext:
      description: 'Context for retrying a failed job or rerunning dataset creation.


        Provides all information needed to prepopulate the create dataset form

        with reconciled parameters from the original job and current tool schema.'
      properties:
        current_tool_schema:
          additionalProperties: true
          description: Current tool parameter schema (may have changed since original
            run)
          title: Current Tool Schema
          type: object
        is_dataset_rerun:
          description: True if rerunning a completed dataset, False if retrying a
            failed job
          title: Is Dataset Rerun
          type: boolean
        original_parameters:
          additionalProperties: true
          description: Original parameters from the source job
          title: Original Parameters
          type: object
        parameter_changes:
          description: List of parameter changes detected between original and current
            schema
          items:
            $ref: '#/components/schemas/ParameterChange'
          title: Parameter Changes
          type: array
        reconciled_parameters:
          additionalProperties: true
          description: 'Merged parameters: original values + current defaults for
            new params'
          title: Reconciled Parameters
          type: object
        source_dataset_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Dataset ID if this is a dataset rerun
          title: Source Dataset Id
        source_job_id:
          description: Job ID that this retry is based on
          format: uuid
          title: Source Job Id
          type: string
        tenant_tool_id:
          description: TenantTool ID for starting the retry run
          format: uuid
          title: Tenant Tool Id
          type: string
        tool_name:
          description: Data transformer tool name (for display)
          title: Tool Name
          type: string
      required:
      - source_job_id
      - tenant_tool_id
      - tool_name
      - original_parameters
      - reconciled_parameters
      - current_tool_schema
      - is_dataset_rerun
      title: DataTransformerRetryContext
      type: object
    DatasetCreate:
      properties:
        artifacts_schema:
          anyOf:
          - items:
              additionalProperties: true
              type: object
            type: array
          - type: 'null'
          title: Artifacts Schema
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        domain:
          anyOf:
          - type: string
          - type: 'null'
          title: Domain
        meta_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Meta Schema
        slug_id:
          title: Slug Id
          type: string
        version:
          anyOf:
          - type: string
          - type: 'null'
          title: Version
      required:
      - slug_id
      title: DatasetCreate
      type: object
    DatasetItemCreate:
      properties:
        artifacts:
          anyOf:
          - items:
              additionalProperties: true
              type: object
            type: array
          - type: 'null'
          title: Artifacts
        meta:
          additionalProperties: true
          title: Meta
          type: object
        slug_id:
          title: Slug Id
          type: string
      required:
      - slug_id
      - meta
      title: DatasetItemCreate
      type: object
    DatasetItemResponse:
      properties:
        artifacts:
          items:
            additionalProperties: true
            type: object
          title: Artifacts
          type: array
        created_at:
          format: date-time
          title: Created At
          type: string
        dataset_id:
          format: uuid
          title: Dataset Id
          type: string
        id:
          format: uuid
          title: Id
          type: string
        meta:
          additionalProperties: true
          title: Meta
          type: object
        slug_id:
          title: Slug Id
          type: string
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - tenant_id
      - dataset_id
      - slug_id
      - meta
      - artifacts
      - created_at
      - updated_at
      title: DatasetItemResponse
      type: object
    DatasetItemsListResponse:
      description: Paginated list of dataset items.
      properties:
        items:
          items:
            $ref: '#/components/schemas/DatasetItemResponse'
          title: Items
          type: array
        paging:
          $ref: '#/components/schemas/PagingMeta'
      required:
      - items
      - paging
      title: DatasetItemsListResponse
      type: object
    DatasetResponse:
      properties:
        artifacts_schema:
          items:
            additionalProperties: true
            type: object
          title: Artifacts Schema
          type: array
        created_at:
          format: date-time
          title: Created At
          type: string
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        domain:
          anyOf:
          - type: string
          - type: 'null'
          title: Domain
        id:
          format: uuid
          title: Id
          type: string
        meta_schema:
          additionalProperties: true
          title: Meta Schema
          type: object
        slug_id:
          title: Slug Id
          type: string
        status:
          title: Status
          type: string
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        updated_at:
          format: date-time
          title: Updated At
          type: string
        version:
          anyOf:
          - type: string
          - type: 'null'
          title: Version
      required:
      - id
      - tenant_id
      - slug_id
      - domain
      - description
      - version
      - status
      - meta_schema
      - artifacts_schema
      - created_at
      - updated_at
      title: DatasetResponse
      type: object
    DatasetUpdate:
      properties:
        artifacts_schema:
          anyOf:
          - items:
              additionalProperties: true
              type: object
            type: array
          - type: 'null'
          title: Artifacts Schema
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        domain:
          anyOf:
          - type: string
          - type: 'null'
          title: Domain
        meta_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Meta Schema
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        version:
          anyOf:
          - type: string
          - type: 'null'
          title: Version
      title: DatasetUpdate
      type: object
    DeleteResponse:
      description: Response after deleting a file or directory.
      properties:
        path:
          description: Deleted path
          title: Path
          type: string
      required:
      - path
      title: DeleteResponse
      type: object
    ExecutionMode:
      description: Execution mode for tools.
      enum:
      - SYNC
      - ASYNC
      - HUMAN_IN_THE_LOOP
      title: ExecutionMode
      type: string
    ExecutionStatusBatchItemRequest:
      description: 'One execution to fetch status for in a batch request.


        Uses string IDs so we can return per-item errors (invalid UUIDs do not fail
        the whole request).'
      properties:
        chat_id:
          description: Conversation set ID (UUID string)
          title: Chat Id
          type: string
        execution_id:
          description: Execution ID (UUID string)
          title: Execution Id
          type: string
      required:
      - chat_id
      - execution_id
      title: ExecutionStatusBatchItemRequest
      type: object
    ExecutionStatusBatchItemResult:
      description: Per-item result for batch execution status polling.
      properties:
        chat_id:
          title: Chat Id
          type: string
        error:
          anyOf:
          - type: string
          - type: 'null'
          description: Error code/message when ok=false (e.g., invalid_id, not_found,
            error)
          title: Error
        execution_id:
          title: Execution Id
          type: string
        finished_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: Execution finished_at timestamp when ok=true
          title: Finished At
        ok:
          description: True if status was retrieved successfully
          title: Ok
          type: boolean
        status:
          anyOf:
          - type: string
          - type: 'null'
          description: Execution status when ok=true (pending|running|completed|failed|cancelled|wait_hitl_*)
          title: Status
        updated_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: Execution updated_at timestamp when ok=true
          title: Updated At
      required:
      - chat_id
      - execution_id
      - ok
      title: ExecutionStatusBatchItemResult
      type: object
    ExecutionStatusBatchRequest:
      description: Batch request for execution statuses.
      properties:
        items:
          description: List of (chat_id, execution_id) pairs to fetch status for
          items:
            $ref: '#/components/schemas/ExecutionStatusBatchItemRequest'
          title: Items
          type: array
      title: ExecutionStatusBatchRequest
      type: object
    ExecutionStatusBatchResponse:
      description: Batch response for execution statuses.
      properties:
        items:
          items:
            $ref: '#/components/schemas/ExecutionStatusBatchItemResult'
          title: Items
          type: array
      title: ExecutionStatusBatchResponse
      type: object
    ExecutionStatusResponse:
      description: Execution status response for polling.
      properties:
        assistant_message:
          anyOf:
          - $ref: '#/components/schemas/ChatMessageResponse'
          - type: 'null'
        error:
          anyOf:
          - type: string
          - type: 'null'
          description: Error message if execution failed
          title: Error
        execution_id:
          format: uuid
          title: Execution Id
          type: string
        execution_state:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Detailed execution state including current tool, completed
            tools, HITL requests
          title: Execution State
        finished_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Finished At
        started_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Started At
        status:
          description: 'Execution status: pending, running, completed, failed, cancelled,
            wait_hitl_*'
          title: Status
          type: string
        tool_executions:
          description: Tool execution details (for analytics/history)
          items:
            $ref: '#/components/schemas/ToolExecutionItem'
          title: Tool Executions
          type: array
        tool_messages_sparse:
          description: Sparse tool messages for UI (no content, fetch separately if
            needed)
          items:
            $ref: '#/components/schemas/ToolMessageSparse'
          title: Tool Messages Sparse
          type: array
        updated_at:
          format: date-time
          title: Updated At
          type: string
        user_message:
          anyOf:
          - $ref: '#/components/schemas/ChatMessageResponse'
          - type: 'null'
      required:
      - execution_id
      - status
      - updated_at
      title: ExecutionStatusResponse
      type: object
    ExternalStorageCreate:
      description: Create a new external storage configuration.
      properties:
        access_instructions:
          description: Python code template for accessing this storage
          title: Access Instructions
          type: string
        connection_config:
          additionalProperties: true
          description: Non-sensitive connection metadata
          title: Connection Config
          type: object
        description:
          anyOf:
          - type: string
          - type: 'null'
          description: Optional description
          title: Description
        env_variables:
          additionalProperties:
            type: string
          description: Environment variables (credentials)
          title: Env Variables
          type: object
        name:
          description: Display name for the storage
          title: Name
          type: string
        storage_type:
          description: 'Type: s3, gcs, postgres, http, etc.'
          title: Storage Type
          type: string
      required:
      - name
      - storage_type
      - access_instructions
      title: ExternalStorageCreate
      type: object
    ExternalStorageResponse:
      description: External storage response model.
      properties:
        access_instructions:
          title: Access Instructions
          type: string
        connection_config:
          additionalProperties: true
          title: Connection Config
          type: object
        created_at:
          format: date-time
          title: Created At
          type: string
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        env_variables:
          additionalProperties:
            type: string
          title: Env Variables
          type: object
        id:
          format: uuid
          title: Id
          type: string
        name:
          title: Name
          type: string
        status:
          title: Status
          type: string
        storage_type:
          title: Storage Type
          type: string
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - tenant_id
      - name
      - description
      - storage_type
      - access_instructions
      - env_variables
      - connection_config
      - status
      - created_at
      - updated_at
      title: ExternalStorageResponse
      type: object
    ExternalStorageTypeResponse:
      description: Response model for External Storage Type.
      properties:
        access_instructions_template:
          title: Access Instructions Template
          type: string
        connection_config_schema:
          additionalProperties: true
          title: Connection Config Schema
          type: object
        created_at:
          format: date-time
          title: Created At
          type: string
        default_connection_config:
          additionalProperties: true
          title: Default Connection Config
          type: object
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        display_name:
          title: Display Name
          type: string
        id:
          format: uuid
          title: Id
          type: string
        status:
          title: Status
          type: string
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        type_key:
          title: Type Key
          type: string
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - tenant_id
      - type_key
      - display_name
      - description
      - access_instructions_template
      - connection_config_schema
      - default_connection_config
      - status
      - created_at
      - updated_at
      title: ExternalStorageTypeResponse
      type: object
    ExternalStorageUpdate:
      description: Update an existing external storage configuration.
      properties:
        access_instructions:
          anyOf:
          - type: string
          - type: 'null'
          title: Access Instructions
        connection_config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Connection Config
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        env_variables:
          anyOf:
          - additionalProperties:
              type: string
            type: object
          - type: 'null'
          title: Env Variables
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        storage_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Storage Type
      title: ExternalStorageUpdate
      type: object
    FileReadResponse:
      properties:
        content:
          description: File contents as UTF-8 text
          title: Content
          type: string
        content_type:
          description: MIME-like content type inferred from extension
          enum:
          - text/markdown
          - text/x-python
          title: Content Type
          type: string
        encoding:
          default: utf-8
          title: Encoding
          type: string
        path:
          description: Tenant-relative file path supplied by caller
          title: Path
          type: string
      required:
      - path
      - content
      - content_type
      title: FileReadResponse
      type: object
    FileWriteRequest:
      properties:
        content:
          description: File contents as UTF-8 text
          title: Content
          type: string
        kind:
          anyOf:
          - enum:
            - markdown
            - python
            type: string
          - type: 'null'
          description: Optional kind; if omitted, inferred from path extension
          title: Kind
        path:
          description: Tenant-relative file path to write
          title: Path
          type: string
      required:
      - path
      - content
      title: FileWriteRequest
      type: object
    FileWriteResponse:
      properties:
        bytes_written:
          title: Bytes Written
          type: integer
        path:
          title: Path
          type: string
      required:
      - path
      - bytes_written
      title: FileWriteResponse
      type: object
    HITLSubmitRequest:
      description: Request to submit HITL response.
      properties:
        response_data:
          additionalProperties: true
          description: User-provided data for the HITL request
          title: Response Data
          type: object
      required:
      - response_data
      title: HITLSubmitRequest
      type: object
    HITLSubmitResponse:
      description: Response after submitting HITL data.
      properties:
        execution_status:
          description: Updated execution status after HITL submission
          title: Execution Status
          type: string
        message:
          title: Message
          type: string
        success:
          title: Success
          type: boolean
      required:
      - success
      - message
      - execution_status
      title: HITLSubmitResponse
      type: object
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          title: Detail
          type: array
      title: HTTPValidationError
      type: object
    JobResponse:
      description: 'Unified job response with all fields.


        Flat structure - some fields may be null based on job type.'
      properties:
        artifact_uris:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Artifact Uris
        created_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Created At
        created_dataset_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          title: Created Dataset Id
        error:
          anyOf:
          - type: string
          - type: 'null'
          title: Error
        finished_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Finished At
        id:
          format: uuid
          title: Id
          type: string
        ingested_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Ingested At
        ingestion_error:
          anyOf:
          - type: string
          - type: 'null'
          title: Ingestion Error
        input_variables:
          additionalProperties: true
          title: Input Variables
          type: object
        items_created:
          anyOf:
          - type: integer
          - type: 'null'
          description: Derived from result_summary
          title: Items Created
        job_type:
          default: generic
          description: Derived from script_name prefix
          enum:
          - data_transformer
          - codegen
          - generic
          title: Job Type
          type: string
        requested_outputs:
          items:
            type: string
          title: Requested Outputs
          type: array
        result_summary:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Result Summary
        script_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Script Name
        started_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Started At
        status:
          description: 'Job status: pending | running | completed | failed'
          title: Status
          type: string
        stderr:
          anyOf:
          - type: string
          - type: 'null'
          title: Stderr
        stdout:
          anyOf:
          - type: string
          - type: 'null'
          title: Stdout
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        tenant_tool_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: FK to TenantTool (nullable for legacy jobs)
          title: Tenant Tool Id
        tool_name:
          title: Tool Name
          type: string
        transformer_name:
          anyOf:
          - type: string
          - type: 'null'
          description: Alias for tool_name (backwards compatibility with data-transformers
            API)
          title: Transformer Name
      required:
      - id
      - tenant_id
      - tool_name
      - status
      title: JobResponse
      type: object
    LLMModelCapabilities:
      description: Capabilities supported by an LLM model.
      properties:
        max_tokens:
          anyOf:
          - type: integer
          - type: 'null'
          description: Maximum tokens supported by the model
          title: Max Tokens
        supports_extended_thinking:
          default: false
          description: Whether the model supports extended thinking mode
          title: Supports Extended Thinking
          type: boolean
        supports_json_mode:
          default: true
          description: Whether the model supports JSON response format
          title: Supports Json Mode
          type: boolean
        supports_temperature:
          description: Whether the model supports custom temperature values
          title: Supports Temperature
          type: boolean
        supports_tools:
          description: Whether the model supports function/tool calling
          title: Supports Tools
          type: boolean
        supports_vision:
          default: false
          description: Whether the model supports vision/image inputs
          title: Supports Vision
          type: boolean
      required:
      - supports_temperature
      - supports_tools
      title: LLMModelCapabilities
      type: object
    LLMModelInfo:
      description: Information about a supported LLM model.
      properties:
        capabilities:
          $ref: '#/components/schemas/LLMModelCapabilities'
          description: Model capabilities
        default_temperature:
          default: 0.7
          description: Default temperature for this model
          title: Default Temperature
          type: number
        description:
          anyOf:
          - type: string
          - type: 'null'
          description: Model description
          title: Description
        id:
          description: Model identifier (e.g., 'gpt-4o')
          title: Id
          type: string
        is_recommended:
          default: false
          description: Whether this is a recommended model
          title: Is Recommended
          type: boolean
        is_selectable:
          default: false
          description: Whether the model is selectable in the chat dropdown
          title: Is Selectable
          type: boolean
        name:
          description: Human-readable model name
          title: Name
          type: string
        provider:
          description: Model provider (e.g., 'openai')
          title: Provider
          type: string
      required:
      - id
      - name
      - provider
      - capabilities
      title: LLMModelInfo
      type: object
    MCPPreviewRequest:
      description: Request to preview tools from an MCP server.
      properties:
        mcp_server_url:
          title: Mcp Server Url
          type: string
      required:
      - mcp_server_url
      title: MCPPreviewRequest
      type: object
    MCPToolPreview:
      description: Preview of a tool from an MCP server.
      properties:
        description:
          title: Description
          type: string
        inputSchema:
          additionalProperties: true
          title: Inputschema
          type: object
        name:
          title: Name
          type: string
      required:
      - name
      - description
      - inputSchema
      title: MCPToolPreview
      type: object
    MessageDiagnosticsResponse:
      description: Diagnostics data for a chat message.
      properties:
        execution_id:
          anyOf:
          - type: string
          - type: 'null'
          description: Execution ID if message has associated execution
          title: Execution Id
        execution_state:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Full execution state JSONB
          title: Execution State
        finished_at:
          anyOf:
          - type: string
          - type: 'null'
          description: ISO format timestamp when execution finished
          title: Finished At
        message_id:
          description: Message ID
          title: Message Id
          type: string
        model:
          anyOf:
          - type: string
          - type: 'null'
          description: Model name/identifier used for this execution
          title: Model
        started_at:
          anyOf:
          - type: string
          - type: 'null'
          description: ISO format timestamp when execution started
          title: Started At
        status:
          description: 'Execution status: pending, running, completed, failed, cancelled'
          title: Status
          type: string
        system_prompt:
          anyOf:
          - type: string
          - type: 'null'
          description: System prompt used for this execution (if persisted)
          title: System Prompt
        system_prompt_persisted:
          default: false
          description: Whether system prompt was persisted for this execution
          title: System Prompt Persisted
          type: boolean
        token_counts:
          anyOf:
          - additionalProperties:
              anyOf:
              - type: integer
              - type: 'null'
            type: object
          - type: 'null'
          description: 'Token counts: prompt_tokens, completion_tokens, total_tokens'
          title: Token Counts
        tool_executions:
          description: Tool execution details with timing
          items:
            $ref: '#/components/schemas/ToolExecutionItem'
          title: Tool Executions
          type: array
        total_duration_ms:
          anyOf:
          - type: integer
          - type: 'null'
          description: Total execution duration in milliseconds
          title: Total Duration Ms
      required:
      - message_id
      - status
      title: MessageDiagnosticsResponse
      type: object
    MkdirRequest:
      description: Request to create a directory.
      properties:
        path:
          description: Tenant-relative directory path to create
          title: Path
          type: string
      required:
      - path
      title: MkdirRequest
      type: object
    MkdirResponse:
      description: Response after creating a directory.
      properties:
        path:
          description: Created directory path
          title: Path
          type: string
      required:
      - path
      title: MkdirResponse
      type: object
    MoveRequest:
      description: Request to move/rename a file or directory.
      properties:
        destination:
          description: Destination path
          title: Destination
          type: string
        source:
          description: Source path
          title: Source
          type: string
      required:
      - source
      - destination
      title: MoveRequest
      type: object
    MoveResponse:
      description: Response after moving a file or directory.
      properties:
        destination:
          title: Destination
          type: string
        source:
          title: Source
          type: string
      required:
      - source
      - destination
      title: MoveResponse
      type: object
    MultipartPartUrl:
      description: Presigned URL for a single part in multipart upload.
      properties:
        part_number:
          description: Part number (1-indexed)
          title: Part Number
          type: integer
        presigned_url:
          description: Presigned URL for uploading this part
          title: Presigned Url
          type: string
      required:
      - part_number
      - presigned_url
      title: MultipartPartUrl
      type: object
    MultipartPresignedUrlsResponse:
      description: Response containing multipart upload data with presigned URLs for
        each part.
      properties:
        bucket:
          description: S3 bucket name
          title: Bucket
          type: string
        expires_in:
          description: URL expiration time in seconds
          title: Expires In
          type: integer
        key:
          description: S3 object key
          title: Key
          type: string
        num_parts:
          description: Total number of parts
          title: Num Parts
          type: integer
        part_size:
          description: Size of each part in bytes (except last)
          title: Part Size
          type: integer
        part_urls:
          description: Presigned URLs for each part
          items:
            $ref: '#/components/schemas/MultipartPartUrl'
          title: Part Urls
          type: array
        upload_id:
          description: Multipart upload ID
          title: Upload Id
          type: string
      required:
      - upload_id
      - bucket
      - key
      - part_urls
      - part_size
      - num_parts
      - expires_in
      title: MultipartPresignedUrlsResponse
      type: object
    PaginationMeta:
      properties:
        count:
          title: Count
          type: integer
        next_page:
          anyOf:
          - type: integer
          - type: 'null'
          title: Next Page
        page:
          title: Page
          type: integer
        request_count:
          title: Request Count
          type: integer
      required:
      - page
      - next_page
      - count
      - request_count
      title: PaginationMeta
      type: object
    PagingMeta:
      description: Pagination metadata included in paginated responses.
      properties:
        limit:
          description: Maximum items per page (as requested)
          title: Limit
          type: integer
        offset:
          description: Number of items skipped
          title: Offset
          type: integer
        total:
          description: Total number of items available
          title: Total
          type: integer
      required:
      - limit
      - offset
      - total
      title: PagingMeta
      type: object
    ParameterChange:
      description: Describes a change in a parameter between stored and current schema.
      properties:
        change_type:
          description: Type of change detected
          enum:
          - added
          - removed
          - value_modified
          title: Change Type
          type: string
        current_default:
          anyOf:
          - {}
          - type: 'null'
          description: Default value from current schema (if exists)
          title: Current Default
        parameter:
          description: Parameter name
          title: Parameter
          type: string
        stored_value:
          anyOf:
          - {}
          - type: 'null'
          description: Value from original job (if existed)
          title: Stored Value
      required:
      - parameter
      - change_type
      title: ParameterChange
      type: object
    PresignedUrlResponse:
      description: Response containing presigned URL for direct S3 upload.
      properties:
        expires_in:
          description: URL expiration time in seconds
          title: Expires In
          type: integer
        full_path:
          description: Full storage path where file will be saved
          title: Full Path
          type: string
        headers:
          additionalProperties:
            type: string
          description: Required headers for upload
          title: Headers
          type: object
        upload_method:
          default: PUT
          description: HTTP method to use
          title: Upload Method
          type: string
        upload_url:
          description: Presigned URL for PUT request
          title: Upload Url
          type: string
      required:
      - upload_url
      - expires_in
      - full_path
      title: PresignedUrlResponse
      type: object
    ResponseData_DataTransformerRetryContext_:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            $ref: '#/components/schemas/DataTransformerRetryContext'
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[DataTransformerRetryContext]
      type: object
    ResponseData_JobResponse_:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            $ref: '#/components/schemas/JobResponse'
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[JobResponse]
      type: object
    ResponseData_MessageDiagnosticsResponse_:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            $ref: '#/components/schemas/MessageDiagnosticsResponse'
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[MessageDiagnosticsResponse]
      type: object
    ResponseData_TagResponse_:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            $ref: '#/components/schemas/TagResponse'
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[TagResponse]
      type: object
    ResponseData_ToolCategoryResponse_:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            $ref: '#/components/schemas/ToolCategoryResponse'
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[ToolCategoryResponse]
      type: object
    ResponseData_list_AdminGlobalUserItem__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/AdminGlobalUserItem'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[AdminGlobalUserItem]]
      type: object
    ResponseData_list_AdminTenantListItem__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/AdminTenantListItem'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[AdminTenantListItem]]
      type: object
    ResponseData_list_AdminToolListItem__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/AdminToolListItem'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[AdminToolListItem]]
      type: object
    ResponseData_list_AgentConfigResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/AgentConfigResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[AgentConfigResponse]]
      type: object
    ResponseData_list_ConversationSetResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/ConversationSetResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[ConversationSetResponse]]
      type: object
    ResponseData_list_DatasetResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/DatasetResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[DatasetResponse]]
      type: object
    ResponseData_list_JobResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/JobResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[JobResponse]]
      type: object
    ResponseData_list_TagResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/TagResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[TagResponse]]
      type: object
    ResponseData_list_TenantResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/TenantResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[TenantResponse]]
      type: object
    ResponseData_list_TenantUserDetailResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/TenantUserDetailResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[TenantUserDetailResponse]]
      type: object
    ResponseData_list_ToolCategoryResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/ToolCategoryResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[ToolCategoryResponse]]
      type: object
    ResponseData_list_ToolResponse__:
      properties:
        meta:
          $ref: '#/components/schemas/PaginationMeta'
        payload:
          additionalProperties:
            items:
              $ref: '#/components/schemas/ToolResponse'
            type: array
          title: Payload
          type: object
      required:
      - meta
      - payload
      title: ResponseData[list[ToolResponse]]
      type: object
    SeedAgentConfigsResponse:
      description: Response model for seeding agent configs.
      properties:
        configs:
          items:
            $ref: '#/components/schemas/AgentConfigResponse'
          title: Configs
          type: array
        count:
          title: Count
          type: integer
      required:
      - configs
      - count
      title: SeedAgentConfigsResponse
      type: object
    SeedDatasetResponse:
      description: Response model for seeding a dataset.
      properties:
        dataset_id:
          title: Dataset Id
          type: string
        dataset_slug_id:
          title: Dataset Slug Id
          type: string
        items_count:
          title: Items Count
          type: integer
        status:
          title: Status
          type: string
      required:
      - dataset_id
      - dataset_slug_id
      - items_count
      - status
      title: SeedDatasetResponse
      type: object
    SeedExternalStorageTypesResponse:
      description: Response model for seeding external storage types.
      properties:
        count:
          title: Count
          type: integer
        storage_types:
          items:
            $ref: '#/components/schemas/ExternalStorageTypeResponse'
          title: Storage Types
          type: array
      required:
      - storage_types
      - count
      title: SeedExternalStorageTypesResponse
      type: object
    SeedToolsResponse:
      description: Response model for seeding tools.
      properties:
        count:
          title: Count
          type: integer
        tools:
          items:
            $ref: '#/components/schemas/ToolResponse'
          title: Tools
          type: array
      required:
      - tools
      - count
      title: SeedToolsResponse
      type: object
    SendMessagePollingResponse:
      description: Response when sending a message with polling approach (immediate
        return).
      properties:
        execution_id:
          format: uuid
          title: Execution Id
          type: string
        message:
          default: Processing started
          description: User-facing message
          title: Message
          type: string
        status:
          default: pending
          description: Initial status (always 'pending')
          title: Status
          type: string
      required:
      - execution_id
      title: SendMessagePollingResponse
      type: object
    SendMessageRequest:
      description: Request to send a message in a conversation set.
      properties:
        agent_config_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Optional agent config ID to switch context/agent for this turn,
            creating a new conversation slice if different from the current one.
          title: Agent Config Id
        content:
          description: Message content
          title: Content
          type: string
        detailed_reasoning:
          default: false
          description: Enable detailed reasoning mode (requires Sequential Thinking
            tool)
          title: Detailed Reasoning
          type: boolean
        include_dataset_schema:
          default: true
          description: Include dataset meta_schema in system prompt instructions
          title: Include Dataset Schema
          type: boolean
        model_override:
          anyOf:
          - type: string
          - type: 'null'
          description: Override the agent config's model for this message. If not
            provided, uses the agent config's model.
          title: Model Override
        thinking_mode:
          anyOf:
          - enum:
            - auto
            - light
            - medium
            - deep
            type: string
          - type: 'null'
          description: 'Thinking mode for models that support extended thinking (o1,
            o3, gpt-5). Options: auto (let model decide), light (5k tokens), medium
            (25k), deep (100k). Only applies when model supports extended thinking.'
          title: Thinking Mode
      required:
      - content
      title: SendMessageRequest
      type: object
    SendMessageResponse:
      description: Response after sending a message and getting LLM response.
      properties:
        assistant_message:
          $ref: '#/components/schemas/ChatMessageResponse'
        id:
          format: uuid
          title: Id
          type: string
        tool_executions:
          description: Details of tools that were executed
          items:
            additionalProperties: true
            type: object
          title: Tool Executions
          type: array
        user_message:
          $ref: '#/components/schemas/ChatMessageResponse'
      required:
      - user_message
      - assistant_message
      - id
      title: SendMessageResponse
      type: object
    StandardResponse_DataTransformerRetryContext_:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_DataTransformerRetryContext_'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[DataTransformerRetryContext]
      type: object
    StandardResponse_JobResponse_:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_JobResponse_'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[JobResponse]
      type: object
    StandardResponse_MessageDiagnosticsResponse_:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_MessageDiagnosticsResponse_'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[MessageDiagnosticsResponse]
      type: object
    StandardResponse_TagResponse_:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_TagResponse_'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[TagResponse]
      type: object
    StandardResponse_ToolCategoryResponse_:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_ToolCategoryResponse_'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[ToolCategoryResponse]
      type: object
    StandardResponse_list_AdminGlobalUserItem__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_AdminGlobalUserItem__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[AdminGlobalUserItem]]
      type: object
    StandardResponse_list_AdminTenantListItem__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_AdminTenantListItem__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[AdminTenantListItem]]
      type: object
    StandardResponse_list_AdminToolListItem__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_AdminToolListItem__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[AdminToolListItem]]
      type: object
    StandardResponse_list_AgentConfigResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_AgentConfigResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[AgentConfigResponse]]
      type: object
    StandardResponse_list_ConversationSetResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_ConversationSetResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[ConversationSetResponse]]
      type: object
    StandardResponse_list_DatasetResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_DatasetResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[DatasetResponse]]
      type: object
    StandardResponse_list_JobResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_JobResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[JobResponse]]
      type: object
    StandardResponse_list_TagResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_TagResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[TagResponse]]
      type: object
    StandardResponse_list_TenantResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_TenantResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[TenantResponse]]
      type: object
    StandardResponse_list_TenantUserDetailResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_TenantUserDetailResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[TenantUserDetailResponse]]
      type: object
    StandardResponse_list_ToolCategoryResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_ToolCategoryResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[ToolCategoryResponse]]
      type: object
    StandardResponse_list_ToolResponse__:
      properties:
        action:
          title: Action
          type: string
        data:
          $ref: '#/components/schemas/ResponseData_list_ToolResponse__'
        timestamp:
          format: date-time
          title: Timestamp
          type: string
        trace_id:
          title: Trace Id
          type: string
      required:
      - action
      - data
      - trace_id
      title: StandardResponse[list[ToolResponse]]
      type: object
    StorageItem:
      description: Represents a file or directory in storage.
      properties:
        file_type:
          anyOf:
          - type: string
          - type: 'null'
          description: Detected MIME type from content (files only); None for dirs
            or when unknown/uncapped
          title: File Type
        modified:
          anyOf:
          - type: string
          - type: 'null'
          description: Last modified timestamp (ISO format)
          title: Modified
        name:
          description: File or directory name
          title: Name
          type: string
        path:
          description: Full tenant-relative path
          title: Path
          type: string
        size:
          anyOf:
          - type: integer
          - type: 'null'
          description: Size in bytes (null for directories)
          title: Size
        type:
          description: Item type
          enum:
          - file
          - directory
          title: Type
          type: string
      required:
      - name
      - path
      - type
      title: StorageItem
      type: object
    TagResponse:
      description: 'Tag response (read-only).


        Tags are managed via seed data, not through API endpoints.'
      properties:
        created_at:
          description: Tag creation timestamp
          format: date-time
          title: Created At
          type: string
        description:
          anyOf:
          - type: string
          - type: 'null'
          description: What this tag represents
          title: Description
        id:
          description: Tag ID
          format: uuid
          title: Id
          type: string
        name:
          description: Human-readable display name
          title: Name
          type: string
        slug_id:
          description: 'Immutable hierarchical identifier: {tag_group}/{tag_name}'
          title: Slug Id
          type: string
        tag_group:
          description: 'Tag group: ''data'', ''system'', or ''results'''
          title: Tag Group
          type: string
        updated_at:
          description: Tag update timestamp
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - name
      - slug_id
      - tag_group
      - created_at
      - updated_at
      title: TagResponse
      type: object
    TenantCreate:
      description: Request model for creating a tenant.
      properties:
        id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          title: Id
        initial_user_email:
          anyOf:
          - format: email
            type: string
          - type: 'null'
          title: Initial User Email
        initial_user_role:
          anyOf:
          - type: string
          - type: 'null'
          title: Initial User Role
        max_seats:
          default: 5
          title: Max Seats
          type: integer
        name:
          title: Name
          type: string
      required:
      - name
      title: TenantCreate
      type: object
    TenantRef:
      description: Tenant reference for a user's membership.
      properties:
        role:
          default: tenant_user
          title: Role
          type: string
        tenant_id:
          title: Tenant Id
          type: string
        tenant_name:
          title: Tenant Name
          type: string
      required:
      - tenant_id
      - tenant_name
      title: TenantRef
      type: object
    TenantResponse:
      description: Response model for tenant information.
      properties:
        configs:
          additionalProperties: true
          title: Configs
          type: object
        created_at:
          format: date-time
          title: Created At
          type: string
        id:
          format: uuid
          title: Id
          type: string
        max_seats:
          title: Max Seats
          type: integer
        name:
          title: Name
          type: string
        policies:
          additionalProperties: true
          title: Policies
          type: object
        slug_id:
          title: Slug Id
          type: string
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - slug_id
      - name
      - policies
      - configs
      - max_seats
      - created_at
      - updated_at
      title: TenantResponse
      type: object
    TenantToolCreate:
      description: Create a new tenant-tool association.
      properties:
        config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Per-tenant config (deep merged with Tool.config if not None,
            null = use base)
          title: Config
        input_parameters_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Per-tenant input parameters schema (deep merged with Tool.input_parameters_schema
            if not None, null = use base)
          title: Input Parameters Schema
        status:
          default: enabled
          description: Tool status for this tenant
          enum:
          - enabled
          - disabled
          title: Status
          type: string
        tool_id:
          description: Tool ID to enable for tenant
          format: uuid
          title: Tool Id
          type: string
      required:
      - tool_id
      title: TenantToolCreate
      type: object
    TenantToolResponse:
      description: TenantTool response with merged config and parameters.
      properties:
        config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Config
        created_at:
          format: date-time
          title: Created At
          type: string
        effective_config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Effective config (TenantTool.config deep merged with Tool.config
            if not None, else Tool.config)
          title: Effective Config
        effective_input_parameters_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Effective input parameters schema (TenantTool.input_parameters_schema
            deep merged with Tool.input_parameters_schema if not None, else Tool.input_parameters_schema)
          title: Effective Input Parameters Schema
        id:
          format: uuid
          title: Id
          type: string
        input_parameters_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Input Parameters Schema
        status:
          title: Status
          type: string
        tenant_id:
          format: uuid
          title: Tenant Id
          type: string
        tool:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Tool data (populated via eager loading)
          title: Tool
        tool_id:
          format: uuid
          title: Tool Id
          type: string
        tool_status:
          anyOf:
          - type: string
          - type: 'null'
          description: Catalog tool status ('active' or 'archived'). Archived tools
            cannot be re-enabled.
          title: Tool Status
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - tenant_id
      - tool_id
      - status
      - config
      - input_parameters_schema
      - created_at
      - updated_at
      title: TenantToolResponse
      type: object
    TenantToolUpdate:
      description: Update an existing tenant-tool association.
      properties:
        config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Per-tenant config (deep merged with Tool.config if not None,
            null = use base)
          title: Config
        input_parameters_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Per-tenant input parameters schema (deep merged with Tool.input_parameters_schema
            if not None, null = use base)
          title: Input Parameters Schema
        status:
          anyOf:
          - enum:
            - enabled
            - disabled
            type: string
          - type: 'null'
          description: Tool status for this tenant
          title: Status
      title: TenantToolUpdate
      type: object
    TenantUpdate:
      description: Request model for updating a tenant.
      properties:
        configs:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Configs
        max_seats:
          anyOf:
          - type: integer
          - type: 'null'
          title: Max Seats
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        policies:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Policies
      title: TenantUpdate
      type: object
    TenantUserDetailResponse:
      description: 'Detailed response model combining user info and tenant membership.

        Used for listing users in a tenant.'
      properties:
        accepted_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Accepted At
        email:
          title: Email
          type: string
        invited_at:
          format: date-time
          title: Invited At
          type: string
        invited_by:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          title: Invited By
        last_active_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Last Active At
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        role:
          default: tenant_user
          title: Role
          type: string
        status:
          title: Status
          type: string
        user_id:
          format: uuid
          title: User Id
          type: string
      required:
      - user_id
      - email
      - name
      - status
      - invited_by
      - invited_at
      - accepted_at
      - last_active_at
      title: TenantUserDetailResponse
      type: object
    TenantUserRoleUpdateRequest:
      description: Request model for updating a tenant member's role.
      properties:
        role:
          title: Role
          type: string
      required:
      - role
      title: TenantUserRoleUpdateRequest
      type: object
    ToolCategoryResponse:
      description: 'ToolCategory response (read-only).


        Categories are managed via migrations, not through API endpoints.'
      properties:
        category_name:
          description: Tool category name
          title: Category Name
          type: string
        config_json_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Tool category config JSON schema
          title: Config Json Schema
        created_at:
          description: Tool category creation timestamp
          format: date-time
          title: Created At
          type: string
        description:
          description: Tool category description
          title: Description
          type: string
        id:
          description: Tool category ID
          format: uuid
          title: Id
          type: string
        slug_id:
          description: Immutable identifier for category (snake_case)
          title: Slug Id
          type: string
        updated_at:
          description: Tool category update timestamp
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - category_name
      - slug_id
      - description
      - config_json_schema
      - created_at
      - updated_at
      title: ToolCategoryResponse
      type: object
    ToolCreate:
      description: Create a new tool.
      properties:
        category_name:
          description: Tool category name (e.g., 'mcp', 'http', 'code_gen', 'code_runner').
            Required - every tool must have a category.
          title: Category Name
          type: string
        config:
          additionalProperties: true
          description: Tool-specific config. The schema of this field is defined by
            the tool category.
          title: Config
          type: object
        conversation_set_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: If provided, creates a session-scoped tool for this conversation.
            If None, creates permanent tool.
          title: Conversation Set Id
        description:
          description: Human-readable description
          maxLength: 2000
          minLength: 1
          title: Description
          type: string
        execution_config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Execution configuration (timeout_ms, status_callback_url, polling_interval,
            requires_approval, approval_metadata). Content validated based on execution_mode.
          title: Execution Config
        execution_mode:
          anyOf:
          - $ref: '#/components/schemas/ExecutionMode'
          - type: string
          - type: 'null'
          description: 'Execution mode: SYNC, ASYNC, or HUMAN_IN_THE_LOOP. Defaults
            to SYNC.'
          title: Execution Mode
        input_parameters_schema:
          additionalProperties: true
          description: JSON Schema for input parameters. The required fields are defined
            by the tool category.
          title: Input Parameters Schema
          type: object
        name:
          description: Unique tool name (e.g., 'get_weather')
          maxLength: 255
          minLength: 1
          title: Name
          type: string
        slug_id:
          anyOf:
          - maxLength: 255
            type: string
          - type: 'null'
          description: Immutable identifier for tool (snake_case). Auto-generated
            from name if not provided.
          title: Slug Id
        tags:
          description: Classification tags
          items:
            type: string
          title: Tags
          type: array
      required:
      - name
      - description
      - category_name
      - input_parameters_schema
      title: ToolCreate
      type: object
    ToolExecuteRequest:
      description: Request to execute a tool.
      properties:
        conversation_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Optional conversation context
          title: Conversation Id
        input_parameters:
          additionalProperties: true
          description: Tool input parameters
          title: Input Parameters
          type: object
      required:
      - input_parameters
      title: ToolExecuteRequest
      type: object
    ToolExecuteResponse:
      description: 'Response from tool execution.


        This is the legacy format for direct tool execution via the /tools/execute
        endpoint.

        For MCP-based tool execution, responses are wrapped in MCP content format
        by ToolsMCPServer.'
      properties:
        error:
          anyOf:
          - type: string
          - type: 'null'
          description: Error message if execution failed
          title: Error
        result:
          description: Tool execution result
          title: Result
        status:
          description: 'Execution status: ''success'' or ''error'''
          title: Status
          type: string
      required:
      - result
      - status
      title: ToolExecuteResponse
      type: object
    ToolExecutionItem:
      description: Typed model for tool execution details.
      properties:
        arguments:
          additionalProperties: true
          description: Tool arguments
          title: Arguments
          type: object
        duration_ms:
          anyOf:
          - type: integer
          - type: 'null'
          description: Tool execution duration in milliseconds
          title: Duration Ms
        error:
          anyOf:
          - type: string
          - type: 'null'
          description: Error message if execution failed
          title: Error
        finished_at:
          anyOf:
          - type: string
          - type: 'null'
          description: ISO format timestamp when tool execution finished
          title: Finished At
        iteration:
          description: Which iteration this tool was called in
          title: Iteration
          type: integer
        result:
          anyOf:
          - {}
          - type: 'null'
          description: Tool execution result
          title: Result
        started_at:
          anyOf:
          - type: string
          - type: 'null'
          description: ISO format timestamp when tool execution started
          title: Started At
        status:
          description: 'Execution status: pending|running|success|error'
          title: Status
          type: string
        tool_call_id:
          description: Unique identifier for the tool call
          title: Tool Call Id
          type: string
        tool_category_name:
          anyOf:
          - type: string
          - type: 'null'
          description: Tool category name (e.g., 'code_runner', 'mcp')
          title: Tool Category Name
        tool_name:
          anyOf:
          - type: string
          - type: 'null'
          description: Human-readable tool name
          title: Tool Name
        tool_slug_id:
          description: Tool slug identifier
          title: Tool Slug Id
          type: string
      required:
      - tool_call_id
      - tool_slug_id
      - status
      - iteration
      title: ToolExecutionItem
      type: object
    ToolMessageSparse:
      description: Minimal tool message data for UI display during polling (no content).
      properties:
        content_type:
          default: text
          description: 'Content type: text/visualization/mixed'
          title: Content Type
          type: string
        created_at:
          format: date-time
          title: Created At
          type: string
        id:
          format: uuid
          title: Id
          type: string
        status:
          default: pending
          description: 'Message lifecycle status: pending|processing|completed. Indicates
            if message is still being worked on.'
          title: Status
          type: string
        tool_call_id:
          anyOf:
          - type: string
          - type: 'null'
          description: OpenAI tool_call_id for matching with tool_executions
          title: Tool Call Id
        tool_category_name:
          anyOf:
          - type: string
          - type: 'null'
          description: Tool category name (e.g., 'code_runner', 'mcp', 'http') from
            meta.tool_category_name
          title: Tool Category Name
        tool_slug_id:
          description: Tool slug_id from meta.tool_slug_id
          title: Tool Slug Id
          type: string
      required:
      - id
      - tool_slug_id
      - created_at
      title: ToolMessageSparse
      type: object
    ToolResponse:
      description: Tool response (tenant-agnostic).
      properties:
        category_name:
          description: Tool category name
          title: Category Name
          type: string
        category_slug_id:
          description: Tool category slug_id (immutable identifier)
          title: Category Slug Id
          type: string
        config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Config
        conversation_set_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: If set, this tool is scoped to a specific conversation. If
            None, tool is permanent.
          title: Conversation Set Id
        created_at:
          format: date-time
          title: Created At
          type: string
        description:
          title: Description
          type: string
        id:
          format: uuid
          title: Id
          type: string
        input_parameters_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Input Parameters Schema
        is_session_scoped:
          description: 'Computed field: True if conversation_set_id is not None.'
          readOnly: true
          title: Is Session Scoped
          type: boolean
        name:
          title: Name
          type: string
        output_meta_schema:
          anyOf:
          - items:
              additionalProperties: true
              type: object
            type: array
          - type: 'null'
          description: Get output_meta_schema from config for backward compatibility.
          readOnly: true
          title: Output Meta Schema
        script:
          anyOf:
          - type: string
          - type: 'null'
          description: Get script from config for backward compatibility.
          readOnly: true
          title: Script
        slug_id:
          title: Slug Id
          type: string
        status:
          title: Status
          type: string
        tags:
          description: Classification tags
          items:
            type: string
          title: Tags
          type: array
        tags_display:
          items:
            type: string
          readOnly: true
          title: Tags Display
          type: array
        updated_at:
          format: date-time
          title: Updated At
          type: string
      required:
      - id
      - name
      - slug_id
      - description
      - category_name
      - category_slug_id
      - status
      - created_at
      - updated_at
      - is_session_scoped
      - tags_display
      - script
      - output_meta_schema
      title: ToolResponse
      type: object
    ToolUpdate:
      description: Update an existing tool.
      properties:
        config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Config
        conversation_set_id:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: If set to null, promotes a session-scoped tool to permanent.
            If None, no change.
          title: Conversation Set Id
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        execution_config:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Execution Config
        execution_mode:
          anyOf:
          - $ref: '#/components/schemas/ExecutionMode'
          - type: string
          - type: 'null'
          title: Execution Mode
        input_parameters_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Input Parameters Schema
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Tags
      title: ToolUpdate
      type: object
    ToolsCatalogPreviewItem:
      description: Single item for tools catalog preview.
      properties:
        id:
          title: Id
          type: string
        label:
          title: Label
          type: string
        status:
          title: Status
          type: string
      required:
      - id
      - label
      - status
      title: ToolsCatalogPreviewItem
      type: object
    ToolsCatalogResponse:
      description: Tools catalog summary for admin dashboard.
      properties:
        count:
          title: Count
          type: integer
        preview:
          items:
            $ref: '#/components/schemas/ToolsCatalogPreviewItem'
          title: Preview
          type: array
      required:
      - count
      - preview
      title: ToolsCatalogResponse
      type: object
    UpdateJobRequest:
      description: 'Request to update an existing job.


        Called by MCP service to report status/results.

        All fields are optional for partial updates.'
      properties:
        artifact_uris:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: S3 URIs for large artifacts
          title: Artifact Uris
        error:
          anyOf:
          - type: string
          - type: 'null'
          description: Error message if failed
          title: Error
        finished_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: When script execution completed/failed
          title: Finished At
        result_summary:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Small subset of outputs (scalars, summaries)
          title: Result Summary
        started_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          description: When script execution began
          title: Started At
        status:
          anyOf:
          - type: string
          - type: 'null'
          description: 'Job status: pending | running | completed | failed'
          title: Status
        stderr:
          anyOf:
          - type: string
          - type: 'null'
          description: Script stderr output
          title: Stderr
        stdout:
          anyOf:
          - type: string
          - type: 'null'
          description: Script stdout output
          title: Stdout
      title: UpdateJobRequest
      type: object
    UpdateTenantRequest:
      description: Request model for updating tenant.
      properties:
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
      title: UpdateTenantRequest
      type: object
    UploadResponse:
      description: Response after uploading a file.
      properties:
        path:
          description: Uploaded file path
          title: Path
          type: string
        size:
          description: File size in bytes
          title: Size
          type: integer
      required:
      - path
      - size
      title: UploadResponse
      type: object
    UploadStrategy:
      description: Upload strategy based on storage backend type.
      enum:
      - presigned_url
      - multipart_presigned_urls
      - streaming
      title: UploadStrategy
      type: string
    UploadStrategyResponse:
      description: Response indicating which upload strategy to use.
      properties:
        multipart_data:
          anyOf:
          - $ref: '#/components/schemas/MultipartPresignedUrlsResponse'
          - type: 'null'
          description: Multipart upload data (only if strategy is multipart_presigned_urls)
        presigned_url_data:
          anyOf:
          - $ref: '#/components/schemas/PresignedUrlResponse'
          - type: 'null'
          description: Presigned URL data (only if strategy is presigned_url)
        storage_type:
          description: Storage backend type (s3, local, etc)
          title: Storage Type
          type: string
        strategy:
          $ref: '#/components/schemas/UploadStrategy'
          description: Upload strategy to use
        streaming_endpoint:
          anyOf:
          - type: string
          - type: 'null'
          description: Streaming upload endpoint (only if strategy is streaming)
          title: Streaming Endpoint
      required:
      - strategy
      - storage_type
      title: UploadStrategyResponse
      type: object
    UserInviteRequest:
      description: Request model for inviting a user to a tenant.
      properties:
        email:
          format: email
          title: Email
          type: string
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        role:
          anyOf:
          - type: string
          - type: 'null'
          default: member
          title: Role
      required:
      - email
      title: UserInviteRequest
      type: object
    UserTenantMembership:
      description: Tenant membership information for current user.
      properties:
        role:
          anyOf:
          - type: string
          - type: 'null'
          title: Role
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
        tenant_id:
          title: Tenant Id
          type: string
        tenant_name:
          title: Tenant Name
          type: string
      required:
      - tenant_id
      - tenant_name
      title: UserTenantMembership
      type: object
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          title: Location
          type: array
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
      required:
      - loc
      - msg
      - type
      title: ValidationError
      type: object
    VisualizationCapabilities:
      description: Schema keys the client can render (e.g. Vega-Lite URLs, svg).
      properties:
        schemas:
          description: Schema keys the client supports (e.g. Vega-Lite URLs, svg).
          items:
            type: string
          title: Schemas
          type: array
      title: VisualizationCapabilities
      type: object
info:
  description: Unified API for Lium
  title: Lium
  version: 0.1.0
openapi: 3.1.0
paths:
  /api/v1/admin/analytics/{domain}:
    get:
      description: 'Global analytics for domain (e.g. chats). Admin only.


        Implemented by aggregating per-tenant analytics (RLS-safe: no cross-tenant

        session). scale: optional bucket granularity - hour, day, week, month, year.'
      operationId: get_analytics_global_api_v1_admin_analytics__domain__get
      parameters:
      - in: path
        name: domain
        required: true
        schema:
          title: Domain
          type: string
      - in: query
        name: from
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: From
      - in: query
        name: to
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: To
      - in: query
        name: scale
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Scale
      - in: query
        name: force_recompute
        required: false
        schema:
          default: false
          title: Force Recompute
          type: boolean
      - in: query
        name: cache_ttl_minutes
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Cache Ttl Minutes
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnalyticsResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Analytics Global
      tags:
      - admin
  /api/v1/admin/analytics/{domain}/tenant/{tenant_id}:
    get:
      description: 'Per-tenant analytics for domain (e.g. chats). Admin only.


        Uses tenant-scoped session (get_admin_tenant_db) so RLS allows reading

        that tenant''s conversation_sets, chat_executions, etc. scale: optional

        bucket granularity - hour, day, week, month, year.'
      operationId: get_analytics_tenant_api_v1_admin_analytics__domain__tenant__tenant_id__get
      parameters:
      - in: path
        name: domain
        required: true
        schema:
          title: Domain
          type: string
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: query
        name: from
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: From
      - in: query
        name: to
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: To
      - in: query
        name: scale
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Scale
      - in: query
        name: force_recompute
        required: false
        schema:
          default: false
          title: Force Recompute
          type: boolean
      - in: query
        name: cache_ttl_minutes
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Cache Ttl Minutes
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnalyticsResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Analytics Tenant
      tags:
      - admin
  /api/v1/admin/tenants:
    get:
      description: 'List all tenants (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Used by the admin dashboard to manage all tenants globally.

        Returns id, name, and user_count per tenant.'
      operationId: list_all_tenants_api_v1_admin_tenants_get
      parameters:
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_AdminTenantListItem__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List All Tenants
      tags:
      - admin
    post:
      description: 'Create a tenant (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Delegates to CreateTenantUseCase with get_db (no tenant header).'
      operationId: create_tenant_admin_api_v1_admin_tenants_post
      parameters:
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Tenant Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}:
    delete:
      description: 'Delete a tenant and all associated data (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Deletes the tenant and all related records:

        - tenant_users

        - tools

        - agent_configs

        - chats

        - chat_messages

        - chat_executions

        - datasets

        - dataset_items


        All deletions are cascaded by the database.'
      operationId: delete_tenant_admin_api_v1_admin_tenants__tenant_id__delete
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Tenant Admin
      tags:
      - admin
    get:
      description: 'Get a single tenant by ID (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.'
      operationId: get_tenant_admin_api_v1_admin_tenants__tenant_id__get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Admin
      tags:
      - admin
    patch:
      description: 'Update a tenant (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Used by the admin dashboard to update tenant properties.'
      operationId: update_tenant_admin_api_v1_admin_tenants__tenant_id__patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/agent-configs:
    get:
      description: 'List agent configs for a tenant (admin only).


        Same response shape as GET /api/v1/agent-configs but for the given tenant.'
      operationId: list_tenant_agent_configs_admin_api_v1_admin_tenants__tenant_id__agent_configs_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_AgentConfigResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Agent Configs Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/agent-configs/{config_id}:
    get:
      description: 'Get a single agent config by ID (admin only).


        Delegates to same logic as GET /api/v1/agent-configs/{config_id} with path
        tenant_id and get_db.'
      operationId: get_agent_config_admin_api_v1_admin_tenants__tenant_id__agent_configs__config_id__get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: config_id
        required: true
        schema:
          format: uuid
          title: Config Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentConfigResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Agent Config Admin
      tags:
      - admin
    patch:
      description: 'Update an agent config (admin only).


        Delegates to same logic as PATCH /api/v1/agent-configs/{config_id} with path
        tenant_id and get_db.'
      operationId: update_agent_config_admin_api_v1_admin_tenants__tenant_id__agent_configs__config_id__patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: config_id
        required: true
        schema:
          format: uuid
          title: Config Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentConfigUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentConfigResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Agent Config Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/chats:
    get:
      description: 'List conversation sets (chats) for a tenant (admin only, read-only).


        Optional filters: user_id (owner User.id) or tenant_user_id (TenantUser.id).

        If both are provided, tenant_user_id takes precedence.

        Optional sort: sort_by=created_at|user_id, order=asc|desc.'
      operationId: list_tenant_chats_admin_api_v1_admin_tenants__tenant_id__chats_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - description: Filter by conversation set owner (User.id)
        in: query
        name: user_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Filter by conversation set owner (User.id)
          title: User Id
      - description: Filter by tenant member (TenantUser.id); resolves to owner user_id
        in: query
        name: tenant_user_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Filter by tenant member (TenantUser.id); resolves to owner
            user_id
          title: Tenant User Id
      - description: 'Sort field: created_at or user_id'
        in: query
        name: sort_by
        required: false
        schema:
          default: created_at
          description: 'Sort field: created_at or user_id'
          pattern: ^(created_at|user_id)$
          title: Sort By
          type: string
      - description: 'Sort order: asc or desc'
        in: query
        name: order
        required: false
        schema:
          default: desc
          description: 'Sort order: asc or desc'
          pattern: ^(asc|desc)$
          title: Order
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_ConversationSetResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Chats Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/chats/{conversation_set_id}:
    get:
      description: Get one conversation set for a tenant (admin only, read-only).
      operationId: get_tenant_chat_admin_api_v1_admin_tenants__tenant_id__chats__conversation_set_id__get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationSetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Chat Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/chats/{conversation_set_id}/messages:
    get:
      description: List messages for a conversation set (admin only, read-only).
      operationId: get_tenant_chat_messages_admin_api_v1_admin_tenants__tenant_id__chats__conversation_set_id__messages_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - description: Return messages created after this message ID (exclusive).
        in: query
        name: after_message_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Return messages created after this message ID (exclusive).
          title: After Message Id
      - description: 'Sort order: ''asc'' (oldest first) or ''desc'' (newest first).'
        in: query
        name: order_by
        required: false
        schema:
          default: asc
          description: 'Sort order: ''asc'' (oldest first) or ''desc'' (newest first).'
          pattern: ^(asc|desc)$
          title: Order By
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  additionalProperties: true
                  type: object
                title: Response Get Tenant Chat Messages Admin Api V1 Admin Tenants  Tenant
                  Id  Chats  Conversation Set Id  Messages Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Chat Messages Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/chats/{conversation_set_id}/messages/{message_id}/diagnostics:
    get:
      description: 'Get diagnostics for a message in a tenant''s chat (admin only,
        read-only).

        Does not require the admin to be a participant in the conversation.'
      operationId: get_tenant_chat_message_diagnostics_admin_api_v1_admin_tenants__tenant_id__chats__conversation_set_id__messages__message_id__diagnostics_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: path
        name: message_id
        required: true
        schema:
          format: uuid
          title: Message Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_MessageDiagnosticsResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Chat Message Diagnostics Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/datasets:
    get:
      description: List datasets for a tenant (admin only).
      operationId: list_tenant_datasets_admin_api_v1_admin_tenants__tenant_id__datasets_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_DatasetResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Datasets Admin
      tags:
      - admin
    post:
      description: Create a dataset for a tenant (admin only).
      operationId: create_tenant_dataset_admin_api_v1_admin_tenants__tenant_id__datasets_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Tenant Dataset Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/datasets/{dataset_id}:
    delete:
      description: Delete a dataset and cascade (admin only).
      operationId: delete_tenant_dataset_admin_api_v1_admin_tenants__tenant_id__datasets__dataset_id__delete
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Tenant Dataset Admin
      tags:
      - admin
    get:
      description: Get a dataset by ID or slug_id (admin only).
      operationId: get_tenant_dataset_admin_api_v1_admin_tenants__tenant_id__datasets__dataset_id__get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Dataset Admin
      tags:
      - admin
    patch:
      description: Update a dataset (admin only).
      operationId: update_tenant_dataset_admin_api_v1_admin_tenants__tenant_id__datasets__dataset_id__patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant Dataset Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/datasets/{dataset_id}/items:
    get:
      description: List dataset items with offset pagination (admin only).
      operationId: list_tenant_dataset_items_admin_api_v1_admin_tenants__tenant_id__datasets__dataset_id__items_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: query
        name: limit
        required: false
        schema:
          default: 25
          maximum: 100
          minimum: 1
          title: Limit
          type: integer
      - in: query
        name: offset
        required: false
        schema:
          default: 0
          minimum: 0
          title: Offset
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetItemsListResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Dataset Items Admin
      tags:
      - admin
    post:
      description: Create a dataset item (admin only).
      operationId: create_tenant_dataset_item_admin_api_v1_admin_tenants__tenant_id__datasets__dataset_id__items_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetItemCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetItemResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Tenant Dataset Item Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/external-storages:
    get:
      description: 'List external storages for a tenant (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Used by the admin dashboard to view a tenant''s external storage connections.'
      operationId: list_tenant_external_storages_admin_api_v1_admin_tenants__tenant_id__external_storages_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ExternalStorageResponse'
                title: Response List Tenant External Storages Admin Api V1 Admin Tenants  Tenant
                  Id  External Storages Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant External Storages Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/jobs:
    get:
      description: 'List jobs for a tenant (admin only).


        Same response shape as GET /api/v1/jobs but for the given tenant.'
      operationId: list_tenant_jobs_admin_api_v1_admin_tenants__tenant_id__jobs_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: query
        name: status_filter
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status Filter
      - in: query
        name: tool_name
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tool Name
      - in: query
        name: job_type
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Job Type
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_JobResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Jobs Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/jobs/{job_id}:
    get:
      description: 'Get a single job by ID for a tenant (admin only).


        Tenant is taken from the URL path only. X-Tenant-ID header is ignored.

        Same response shape as GET /api/v1/jobs/{job_id}.'
      operationId: get_tenant_job_admin_api_v1_admin_tenants__tenant_id__jobs__job_id__get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: job_id
        required: true
        schema:
          format: uuid
          title: Job Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_JobResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Job Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/seed/agent-configs:
    post:
      description: 'Seed agent configs for a tenant (admin only).


        Delegates to SeedAgentConfigsUseCase with path tenant_id and get_db.'
      operationId: seed_tenant_agent_configs_admin_api_v1_admin_tenants__tenant_id__seed_agent_configs_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedAgentConfigsResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant Agent Configs Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/seed/datasets:
    post:
      description: 'Seed sample dataset for a tenant (admin only).


        Delegates to SeedTenantDatasetUseCase with path tenant_id and get_db.'
      operationId: seed_tenant_dataset_admin_api_v1_admin_tenants__tenant_id__seed_datasets_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedDatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant Dataset Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/seed/external-storage-types:
    post:
      description: 'Seed external storage types for a tenant (admin only).


        Delegates to SeedExternalStorageTypesUseCase with path tenant_id and get_db.'
      operationId: seed_tenant_external_storage_types_admin_api_v1_admin_tenants__tenant_id__seed_external_storage_types_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedExternalStorageTypesResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant External Storage Types Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/seed/tools:
    post:
      description: 'Enable existing tools for a tenant (admin only).


        Delegates to ToolSeedingService with path tenant_id and get_db.'
      operationId: seed_tenant_tools_admin_api_v1_admin_tenants__tenant_id__seed_tools_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedToolsResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant Tools Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/storage/browse:
    get:
      description: Browse tenant storage (admin only).
      operationId: browse_admin_api_v1_admin_tenants__tenant_id__storage_browse_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - description: Tenant-relative directory path
        in: query
        name: path
        required: false
        schema:
          default: ''
          description: Tenant-relative directory path
          title: Path
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BrowseResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Browse Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/storage/copy:
    post:
      description: Copy file or directory in tenant storage (admin only).
      operationId: copy_admin_api_v1_admin_tenants__tenant_id__storage_copy_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CopyRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CopyResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Copy Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/storage/files:
    delete:
      description: Delete file or directory in tenant storage (admin only).
      operationId: delete_admin_api_v1_admin_tenants__tenant_id__storage_files_delete
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - description: Tenant-relative path to delete
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative path to delete
          title: Path
          type: string
      - description: Delete directory recursively
        in: query
        name: recursive
        required: false
        schema:
          default: false
          description: Delete directory recursively
          title: Recursive
          type: boolean
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/storage/files/download:
    get:
      description: Download file from tenant storage (admin only).
      operationId: download_admin_api_v1_admin_tenants__tenant_id__storage_files_download_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - description: Tenant-relative file path to download
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative file path to download
          title: Path
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Download Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/storage/mkdir:
    post:
      description: Create directory in tenant storage (admin only).
      operationId: mkdir_admin_api_v1_admin_tenants__tenant_id__storage_mkdir_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MkdirRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MkdirResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Mkdir Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/storage/move:
    post:
      description: Move or rename file/directory in tenant storage (admin only).
      operationId: move_admin_api_v1_admin_tenants__tenant_id__storage_move_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MoveResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Move Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/tenant-tools:
    get:
      description: 'List tenant tools for a tenant (admin only).


        Same response shape and semantics as GET /api/v1/tenant-tools/list but for

        the given tenant. Supports tags and enabled_only for agent-config tools-by-tags.'
      operationId: list_tenant_tools_admin_api_v1_admin_tenants__tenant_id__tenant_tools_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - description: Optional JSON for client_visualizer schemas.
        in: query
        name: client_capabilities
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Optional JSON for client_visualizer schemas.
          title: Client Capabilities
      - description: Comma-separated tag slug_ids (e.g. 'data/analyze_data'). Returns
          tools matching ANY of the specified tags. Omit for all tools.
        in: query
        name: tags
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Comma-separated tag slug_ids (e.g. 'data/analyze_data'). Returns
            tools matching ANY of the specified tags. Omit for all tools.
          title: Tags
      - description: When True, include session-scoped tools. Default False.
        in: query
        name: include_session_scoped
        required: false
        schema:
          default: false
          description: When True, include session-scoped tools. Default False.
          title: Include Session Scoped
          type: boolean
      - description: When True, return only tenant tools with status 'enabled'. Use
          True for agent-config tools count (tools available for use).
        in: query
        name: enabled_only
        required: false
        schema:
          default: false
          description: When True, return only tenant tools with status 'enabled'.
            Use True for agent-config tools count (tools available for use).
          title: Enabled Only
          type: boolean
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  additionalProperties: true
                  type: object
                title: Response List Tenant Tools Admin Api V1 Admin Tenants  Tenant
                  Id  Tenant Tools Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Tools Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/tenant-tools/{tenant_tool_id}:
    patch:
      description: 'Update a tenant tool (admin only).


        Delegates to same logic as PATCH /api/v1/tenant-tools/{tenant_tool_id} with
        path tenant_id and get_db.'
      operationId: update_tenant_tool_admin_api_v1_admin_tenants__tenant_id__tenant_tools__tenant_tool_id__patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: tenant_tool_id
        required: true
        schema:
          format: uuid
          title: Tenant Tool Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantToolUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant Tool Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/users:
    get:
      description: 'List all users in a tenant (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Used by the admin dashboard to manage tenant users globally.'
      operationId: list_tenant_users_admin_api_v1_admin_tenants__tenant_id__users_get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_TenantUserDetailResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Users Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/users/invite:
    post:
      description: 'Invite a user to a tenant (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Used by the admin dashboard to invite users to tenants globally.'
      operationId: invite_user_to_tenant_admin_api_v1_admin_tenants__tenant_id__users_invite_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserInviteRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantUserDetailResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Invite User To Tenant Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/users/{user_id}:
    delete:
      description: 'Remove a user from a tenant (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Delegates to RemoveUserFromTenantUseCase with path tenant_id and user_id.'
      operationId: remove_user_from_tenant_admin_api_v1_admin_tenants__tenant_id__users__user_id__delete
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: user_id
        required: true
        schema:
          format: uuid
          title: User Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Remove User From Tenant Admin
      tags:
      - admin
  /api/v1/admin/tenants/{tenant_id}/users/{user_id}/role:
    patch:
      description: 'Update a tenant member''s role (admin only).


        This endpoint bypasses RLS and is only accessible to @astromind.com users.

        Used by the admin dashboard to elevate or demote users within a tenant.'
      operationId: update_tenant_user_role_admin_api_v1_admin_tenants__tenant_id__users__user_id__role_patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: path
        name: user_id
        required: true
        schema:
          format: uuid
          title: User Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantUserRoleUpdateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantUserDetailResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant User Role Admin
      tags:
      - admin
  /api/v1/admin/tools:
    get:
      description: 'Return tools catalog count and preview (admin only).


        Counts active tool definitions. Preview lists first N tools by name.'
      operationId: get_tools_catalog_api_v1_admin_tools_get
      parameters:
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolsCatalogResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tools Catalog
      tags:
      - admin
  /api/v1/admin/tools/list:
    get:
      description: Return paginated list of global tool definitions (admin only, Phase
        3).
      operationId: list_tools_catalog_api_v1_admin_tools_list_get
      parameters:
      - description: Filter by tool status (active, archived). Omit for all.
        in: query
        name: status
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by tool status (active, archived). Omit for all.
          title: Status
      - description: Filter by tool category name (e.g. mcp, http, code_runner). Omit
          for all.
        in: query
        name: category
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by tool category name (e.g. mcp, http, code_runner).
            Omit for all.
          title: Category
      - description: Filter to tools enabled in this tenant (tenant_tool.status =
          enabled). Omit for all.
        in: query
        name: enabled_in_tenant_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Filter to tools enabled in this tenant (tenant_tool.status
            = enabled). Omit for all.
          title: Enabled In Tenant Id
      - description: 'Sort by: name, category, status, created_at'
        in: query
        name: sort_by
        required: false
        schema:
          default: name
          description: 'Sort by: name, category, status, created_at'
          title: Sort By
          type: string
      - description: 'Sort order: asc or desc'
        in: query
        name: sort_order
        required: false
        schema:
          default: asc
          description: 'Sort order: asc or desc'
          title: Sort Order
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_AdminToolListItem__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tools Catalog
      tags:
      - admin
  /api/v1/admin/tools/{tool_id}:
    get:
      description: Get a single tool by ID for admin management (admin only).
      operationId: get_tool_catalog_detail_api_v1_admin_tools__tool_id__get
      parameters:
      - in: path
        name: tool_id
        required: true
        schema:
          format: uuid
          title: Tool Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tool Catalog Detail
      tags:
      - admin
    patch:
      description: Update a global tool by ID (admin only).
      operationId: update_tool_catalog_api_v1_admin_tools__tool_id__patch
      parameters:
      - in: path
        name: tool_id
        required: true
        schema:
          format: uuid
          title: Tool Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ToolUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tool Catalog
      tags:
      - admin
  /api/v1/admin/tools/{tool_id}/tenants:
    get:
      description: 'List all tenants and their status for this tool (admin only).


        Uses a LEFT OUTER JOIN so every tenant is returned; tenants without

        a TenantTool row for this tool get tenant_tool_status="not_enabled".'
      operationId: list_tenants_using_tool_api_v1_admin_tools__tool_id__tenants_get
      parameters:
      - in: path
        name: tool_id
        required: true
        schema:
          format: uuid
          title: Tool Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/AdminToolTenantRow'
                title: Response List Tenants Using Tool Api V1 Admin Tools  Tool Id  Tenants
                  Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenants Using Tool
      tags:
      - admin
  /api/v1/admin/users:
    get:
      description: List all users from the Users table with their tenant memberships
        (admin only).
      operationId: list_all_users_admin_api_v1_admin_users_get
      parameters:
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_AdminGlobalUserItem__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List All Users Admin
      tags:
      - admin
  /api/v1/admin/users/{user_id}:
    delete:
      description: 'Delete a user globally (admin only).


        Removes the user from all tenants, deletes their conversation sets in those
        tenants,

        then deletes the User. Delegates to DeleteUserGloballyUseCase.'
      operationId: delete_user_globally_admin_api_v1_admin_users__user_id__delete
      parameters:
      - in: path
        name: user_id
        required: true
        schema:
          format: uuid
          title: User Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete User Globally Admin
      tags:
      - admin
    patch:
      description: Update a user's display name (admin only).
      operationId: update_user_name_admin_api_v1_admin_users__user_id__patch
      parameters:
      - in: path
        name: user_id
        required: true
        schema:
          format: uuid
          title: User Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserNameRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminGlobalUserItem'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update User Name Admin
      tags:
      - admin
  /api/v1/agent-configs:
    get:
      description: List all agent configs.
      operationId: list_agent_configs_api_v1_agent_configs_get
      parameters:
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_AgentConfigResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Agent Configs
      tags:
      - agent-configs
    post:
      description: Create a new agent config. Only root admin can create; tenant admins
        can view only.
      operationId: create_agent_config_api_v1_agent_configs_post
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentConfigCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentConfigResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Agent Config
      tags:
      - agent-configs
  /api/v1/agent-configs/{agent_config_id}:
    delete:
      description: Delete an agent config (soft delete). Only root admin can delete;
        tenant admins can view only.
      operationId: delete_agent_config_api_v1_agent_configs__agent_config_id__delete
      parameters:
      - in: path
        name: agent_config_id
        required: true
        schema:
          format: uuid
          title: Agent Config Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Agent Config
      tags:
      - agent-configs
    get:
      description: Get an agent config by ID.
      operationId: get_agent_config_api_v1_agent_configs__agent_config_id__get
      parameters:
      - in: path
        name: agent_config_id
        required: true
        schema:
          format: uuid
          title: Agent Config Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentConfigResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Agent Config
      tags:
      - agent-configs
    patch:
      description: Update an agent config. Only root admin can update; tenant admins
        can view only.
      operationId: update_agent_config_api_v1_agent_configs__agent_config_id__patch
      parameters:
      - in: path
        name: agent_config_id
        required: true
        schema:
          format: uuid
          title: Agent Config Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentConfigUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentConfigResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Agent Config
      tags:
      - agent-configs
  /api/v1/chats:
    get:
      description: List all conversation sets for the current user.
      operationId: list_conversation_sets_api_v1_chats_get
      parameters:
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_ConversationSetResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Conversation Sets
      tags:
      - chats
    post:
      description: Create a new conversation set (and initial conversation).
      operationId: create_conversation_set_api_v1_chats_post
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConversationSetCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationSetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Conversation Set
      tags:
      - chats
  /api/v1/chats/executions/status:batch:
    post:
      description: 'Batch execution status endpoint for polling.


        Returns per-item results so a single invalid/unauthorized item does not fail
        the whole request.


        Note: Item IDs are accepted as strings to avoid FastAPI returning 422 for
        the whole batch

        when any single UUID is malformed.'
      operationId: get_execution_status_batch_api_v1_chats_executions_status_batch_post
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExecutionStatusBatchRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExecutionStatusBatchResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Execution Status Batch
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}:
    delete:
      description: Delete a conversation set (soft delete, only if owned by current
        user).
      operationId: delete_conversation_set_api_v1_chats__conversation_set_id__delete
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Conversation Set
      tags:
      - chats
    get:
      description: Get a conversation set by ID (only if owned by current user).
      operationId: get_conversation_set_api_v1_chats__conversation_set_id__get
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationSetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Conversation Set
      tags:
      - chats
    patch:
      description: Update a conversation set (only if owned by current user).
      operationId: update_conversation_set_api_v1_chats__conversation_set_id__patch
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConversationSetUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationSetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Conversation Set
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/executions/{execution_id}/cancel:
    post:
      description: 'Cancel a running execution.


        This endpoint allows users to cancel an execution that is currently running.


        Rate Limiting: 10 requests per minute per execution.'
      operationId: cancel_execution_api_v1_chats__conversation_set_id__executions__execution_id__cancel_post
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: path
        name: execution_id
        required: true
        schema:
          format: uuid
          title: Execution Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Cancel Execution
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/executions/{execution_id}/hitl-response:
    post:
      description: 'Submit a HITL (Human-In-The-Loop) response to resume execution.


        This endpoint allows users to provide data (e.g., credentials, confirmations)

        that the execution is waiting for.


        Rate Limiting: 5 requests per minute per execution.'
      operationId: submit_hitl_response_api_v1_chats__conversation_set_id__executions__execution_id__hitl_response_post
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: path
        name: execution_id
        required: true
        schema:
          format: uuid
          title: Execution Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HITLSubmitRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HITLSubmitResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Submit Hitl Response
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/executions/{execution_id}/status:
    get:
      description: 'Get the current status of an execution (for polling).


        This endpoint is designed for clients that cannot use SSE and need to poll

        for execution status updates.


        Rate Limiting: 10 requests per second per execution.

        Clients should poll at reasonable intervals (500ms recommended).'
      operationId: get_execution_status_api_v1_chats__conversation_set_id__executions__execution_id__status_get
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: path
        name: execution_id
        required: true
        schema:
          format: uuid
          title: Execution Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExecutionStatusResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Execution Status
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/messages:
    get:
      description: 'Get message history for a conversation set with tool executions.


        Supports incremental fetching via `after_message_id` parameter:

        - If provided, returns only messages created after that message ID (exclusive)

        - Uses UUID7''s time-ordered property for efficient filtering

        - Can be combined with pagination for large result sets


        Supports ordering via `order_by` parameter:

        - ''asc'': Oldest messages first (default, backward compatible)

        - ''desc'': Newest messages first (useful for loading latest messages)


        Returns pagination metadata in response headers:

        - X-Total-Count: Total number of messages

        - X-Page: Current page number

        - X-Page-Size: Page size

        - X-Total-Pages: Total number of pages'
      operationId: get_conversation_set_messages_api_v1_chats__conversation_set_id__messages_get
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - description: Return messages created after this message ID (exclusive). Uses
          UUID7 time-ordering for efficient incremental fetching.
        in: query
        name: after_message_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: Return messages created after this message ID (exclusive).
            Uses UUID7 time-ordering for efficient incremental fetching.
          title: After Message Id
      - description: 'Sort order: ''asc'' (oldest first) or ''desc'' (newest first).
          Default: ''asc'' for backward compatibility.'
        in: query
        name: order_by
        required: false
        schema:
          default: asc
          description: 'Sort order: ''asc'' (oldest first) or ''desc'' (newest first).
            Default: ''asc'' for backward compatibility.'
          pattern: ^(asc|desc)$
          title: Order By
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  additionalProperties: true
                  type: object
                title: Response Get Conversation Set Messages Api V1 Chats  Conversation
                  Set Id  Messages Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Conversation Set Messages
      tags:
      - chats
    post:
      description: 'Send a message in a conversation set.


        Two modes:

        - async_processing=true (default): Returns immediately with execution_id,
        client polls for status

        - async_processing=false (legacy): Blocks until completion, returns full response


        The async mode is recommended for long-running executions and enables HITL
        support.'
      operationId: send_message_api_v1_chats__conversation_set_id__messages_post
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - description: If True, return immediately and process asynchronously. If False,
          block until completion (legacy mode).
        in: query
        name: async_processing
        required: false
        schema:
          default: true
          description: If True, return immediately and process asynchronously. If
            False, block until completion (legacy mode).
          title: Async Processing
          type: boolean
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                anyOf:
                - $ref: '#/components/schemas/SendMessageResponse'
                - $ref: '#/components/schemas/SendMessagePollingResponse'
                title: Response Send Message Api V1 Chats  Conversation Set Id  Messages
                  Post
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Send Message
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/messages/stream:
    delete:
      description: 'Cancel an active streaming message generation.


        This is an explicit cancellation signal from the user to stop processing.'
      operationId: cancel_message_stream_api_v1_chats__conversation_set_id__messages_stream_delete
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                title: Response Cancel Message Stream Api V1 Chats  Conversation Set
                  Id  Messages Stream Delete
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Cancel Message Stream
      tags:
      - chats
    post:
      description: Send a message in a conversation set and stream progress updates
        via SSE.
      operationId: send_message_stream_api_v1_chats__conversation_set_id__messages_stream_post
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Send Message Stream
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/messages/{message_id}:
    get:
      description: 'Get a single message by ID from a conversation set.


        Returns the full message with content, tool_executions (if assistant message),
        etc.

        Verifies the message belongs to the conversation set and tenant (RLS enforced).'
      operationId: get_message_by_id_api_v1_chats__conversation_set_id__messages__message_id__get
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: path
        name: message_id
        required: true
        schema:
          format: uuid
          title: Message Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                title: Response Get Message By Id Api V1 Chats  Conversation Set Id  Messages  Message
                  Id  Get
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Message By Id
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/messages/{message_id}/diagnostics:
    get:
      description: 'Get diagnostics data for a chat message.


        Returns aggregated diagnostics including:

        - Execution metadata (status, timing)

        - System prompt (if persisted)

        - Tool executions with timing

        - Model metadata (model name, token counts)

        - Full execution state


        Rate Limiting: 60 requests per minute per user.'
      operationId: get_message_diagnostics_api_v1_chats__conversation_set_id__messages__message_id__diagnostics_get
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: path
        name: message_id
        required: true
        schema:
          format: uuid
          title: Message Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_MessageDiagnosticsResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Message Diagnostics
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/summary:
    get:
      description: Get summary state and summary text for a conversation set.
      operationId: get_conversation_summary_api_v1_chats__conversation_set_id__summary_get
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationSummaryResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Conversation Summary
      tags:
      - chats
  /api/v1/chats/{conversation_set_id}/summary:request:
    post:
      description: Explicitly request summary generation for the latest conversation
        slice.
      operationId: request_conversation_summary_api_v1_chats__conversation_set_id__summary_request_post
      parameters:
      - in: path
        name: conversation_set_id
        required: true
        schema:
          format: uuid
          title: Conversation Set Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - $ref: '#/components/schemas/ConversationSummaryRequest'
              - type: 'null'
              title: Request Body
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationSummaryRequestResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Request Conversation Summary
      tags:
      - chats
  /api/v1/datasets:
    get:
      description: List datasets for the current tenant. Explicit tenant_id filter
        for security (defense in depth with RLS).
      operationId: list_datasets_api_v1_datasets_get
      parameters:
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_DatasetResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Datasets
      tags:
      - datasets
    post:
      description: 'Create a new dataset with optional metadata schema.


        Validates meta_schema if provided to ensure it''s properly formatted

        and JSON-serializable for JSONB storage.'
      operationId: create_dataset_api_v1_datasets_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Dataset
      tags:
      - datasets
  /api/v1/datasets/ingest/{job_id}:
    post:
      description: "Trigger ingestion of processed dataset from S3 into database.\n\
        \nCalled by MCP service after script completes successfully.\nExpects the\
        \ job's artifact_uris to contain 'dataset_items_path'.\n\nReturns 202 Accepted\
        \ immediately and processes in background.\n\nArgs:\n    job_id: Job UUID\
        \ to ingest\n    background_tasks: FastAPI background tasks handler\n    tenant_id:\
        \ From X-Tenant-ID header\n    trace_id: From trace-id header\n    db: Tenant-scoped\
        \ database session\n\nReturns:\n    Job details with 202 Accepted status"
      operationId: ingest_dataset_from_job_api_v1_datasets_ingest__job_id__post
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          format: uuid
          title: Job Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_JobResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Ingest Dataset From Job
      tags:
      - datasets
  /api/v1/datasets/{dataset_id}:
    delete:
      description: 'Delete a dataset and cascade delete related records.


        This endpoint deletes:

        - The dataset itself

        - All dataset items (cascade via FK)

        - All data transformer runs (cascade via FK)

        - All chats that reference this dataset (soft delete by archiving)'
      operationId: delete_dataset_api_v1_datasets__dataset_id__delete
      parameters:
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Dataset
      tags:
      - datasets
    get:
      description: Get a dataset by ID or slug_id. Explicit tenant_id filter for security
        (defense in depth with RLS).
      operationId: get_dataset_api_v1_datasets__dataset_id__get
      parameters:
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Dataset
      tags:
      - datasets
    patch:
      description: 'Update a dataset by ID or slug_id.


        Validates meta_schema if being updated to ensure it''s properly formatted.'
      operationId: update_dataset_api_v1_datasets__dataset_id__patch
      parameters:
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Dataset
      tags:
      - datasets
  /api/v1/datasets/{dataset_id}/conversation-sets:
    get:
      description: List all conversation sets that use a specific dataset.
      operationId: list_dataset_conversation_sets_api_v1_datasets__dataset_id__conversation_sets_get
      parameters:
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ConversationSetResponse'
                title: Response List Dataset Conversation Sets Api V1 Datasets  Dataset
                  Id  Conversation Sets Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Dataset Conversation Sets
      tags:
      - datasets
  /api/v1/datasets/{dataset_id}/items:
    get:
      description: "List dataset items with offset-based pagination.\n\nQuery Parameters:\n\
        \    limit: Maximum number of items to return (1-100, default: 25)\n    offset:\
        \ Number of items to skip (default: 0)"
      operationId: list_dataset_items_api_v1_datasets__dataset_id__items_get
      parameters:
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: query
        name: limit
        required: false
        schema:
          default: 25
          maximum: 100
          minimum: 1
          title: Limit
          type: integer
      - in: query
        name: offset
        required: false
        schema:
          default: 0
          minimum: 0
          title: Offset
          type: integer
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetItemsListResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Dataset Items
      tags:
      - datasets
    post:
      operationId: create_dataset_item_api_v1_datasets__dataset_id__items_post
      parameters:
      - in: path
        name: dataset_id
        required: true
        schema:
          title: Dataset Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetItemCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetItemResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Dataset Item
      tags:
      - datasets
  /api/v1/external-storage-types:
    get:
      description: List all external storage types for the tenant.
      operationId: list_external_storage_types_api_v1_external_storage_types_get
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ExternalStorageTypeResponse'
                title: Response List External Storage Types Api V1 External Storage
                  Types Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List External Storage Types
      tags:
      - external-storage-types
  /api/v1/external-storages:
    get:
      description: List all external storages for the tenant.
      operationId: list_external_storages_api_v1_external_storages_get
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ExternalStorageResponse'
                title: Response List External Storages Api V1 External Storages Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List External Storages
      tags:
      - external-storages
    post:
      description: Create a new external storage configuration.
      operationId: create_external_storage_api_v1_external_storages_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExternalStorageCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalStorageResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create External Storage
      tags:
      - external-storages
  /api/v1/external-storages/{storage_id}:
    delete:
      description: Delete an external storage configuration.
      operationId: delete_external_storage_api_v1_external_storages__storage_id__delete
      parameters:
      - in: path
        name: storage_id
        required: true
        schema:
          format: uuid
          title: Storage Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete External Storage
      tags:
      - external-storages
    get:
      description: Get a specific external storage by ID.
      operationId: get_external_storage_api_v1_external_storages__storage_id__get
      parameters:
      - in: path
        name: storage_id
        required: true
        schema:
          format: uuid
          title: Storage Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalStorageResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get External Storage
      tags:
      - external-storages
    patch:
      description: Update an external storage configuration.
      operationId: update_external_storage_api_v1_external_storages__storage_id__patch
      parameters:
      - in: path
        name: storage_id
        required: true
        schema:
          format: uuid
          title: Storage Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExternalStorageUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalStorageResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update External Storage
      tags:
      - external-storages
  /api/v1/jobs:
    get:
      description: "List jobs for the current tenant.\n\nSupports filtering by status,\
        \ tool_name, job_type, and tenant_tool_id.\n\nArgs:\n    status_filter: Optional\
        \ filter by job status\n    tool_name: Optional filter by tool name\n    job_type:\
        \ Optional filter by job type (data_transformer, codegen, generic)\n    tenant_tool_id:\
        \ Optional filter by tenant tool ID\n    pagination: Page number and size\n\
        \    tenant_id: From X-Tenant-ID header\n    trace_id: From trace-id header\n\
        \    db: Tenant-scoped database session\n\nReturns:\n    Paginated list of\
        \ jobs"
      operationId: list_jobs_api_v1_jobs_get
      parameters:
      - in: query
        name: status_filter
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status Filter
      - in: query
        name: tool_name
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tool Name
      - in: query
        name: job_type
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Job Type
      - in: query
        name: tenant_tool_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          title: Tenant Tool Id
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_JobResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Jobs
      tags:
      - jobs
    post:
      description: "Create a new job for the specified tenant tool.\n\nCreates a job\
        \ record in pending status. Does NOT execute the tool.\nExecution is triggered\
        \ separately (e.g., via a scheduler or explicit call).\n\nArgs:\n    data:\
        \ Request with tenant_tool_id and parameters\n    tenant_id: From X-Tenant-ID\
        \ header\n    trace_id: From trace-id header\n    db: Tenant-scoped database\
        \ session\n\nReturns:\n    201 Created with job record"
      operationId: create_job_api_v1_jobs_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateJobRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_JobResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Job
      tags:
      - jobs
  /api/v1/jobs/retry-context/{source_type}/{source_id}:
    get:
      description: "Get context needed to retry a failed job or rerun dataset creation.\n\
        \nThis endpoint provides all information needed to prepopulate the create\
        \ dataset\nform when retrying a failed job or rerunning a completed dataset.\n\
        \n**For Failed Job Retry (source_type=job):**\n- Retrieves job directly by\
        \ job_id\n- Only allows retry if job status is 'failed'\n- Reconciles stored\
        \ parameters with current tool schema\n\n**For Dataset Rerun (source_type=dataset):**\n\
        - Finds most recent job that created this dataset\n- Allows rerun even if\
        \ job succeeded\n- Enables DELETE old items + INSERT new items pattern\n\n\
        Args:\n    source_type: Either \"job\" (retry failed job) or \"dataset\" (rerun\
        \ dataset creation)\n    source_id: UUID of job or dataset\n    tenant_id:\
        \ From X-Tenant-ID header\n    trace_id: From trace-id header\n    db: Tenant-scoped\
        \ database session\n\nReturns:\n    DataTransformerRetryContext with:\n  \
        \  - tool_name (locked for retry)\n    - original_parameters (from source\
        \ job)\n    - reconciled_parameters (merged with current schema)\n    - parameter_changes\
        \ (added/removed/modified indicators)\n    - is_dataset_rerun (true for dataset\
        \ reruns)\n\nRaises:\n    HTTPException:\n        - 404: Job/dataset not found\n\
        \        - 400: Cannot retry job (wrong status)"
      operationId: get_retry_context_api_v1_jobs_retry_context__source_type___source_id__get
      parameters:
      - in: path
        name: source_type
        required: true
        schema:
          enum:
          - job
          - dataset
          title: Source Type
          type: string
      - in: path
        name: source_id
        required: true
        schema:
          format: uuid
          title: Source Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_DataTransformerRetryContext_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Retry Context
      tags:
      - jobs
  /api/v1/jobs/{job_id}:
    get:
      description: "Get a single job by ID.\n\nArgs:\n    job_id: Job UUID\n    tenant_id:\
        \ From X-Tenant-ID header\n    trace_id: From trace-id header\n    db: Tenant-scoped\
        \ database session\n\nReturns:\n    Job details including status and results"
      operationId: get_job_api_v1_jobs__job_id__get
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          format: uuid
          title: Job Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_JobResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Job
      tags:
      - jobs
    patch:
      description: "Update a job status and/or results.\n\nCalled by MCP service to\
        \ report:\n- Status transitions (pending  running  completed/failed)\n-\
        \ Execution timing (started_at, finished_at)\n- Results (result_summary, artifact_uris,\
        \ error)\n\nArgs:\n    job_id: Job UUID to update\n    data: Partial update\
        \ request\n    tenant_id: From X-Tenant-ID header\n    trace_id: From trace-id\
        \ header\n    db: Tenant-scoped database session\n\nReturns:\n    Updated\
        \ job"
      operationId: update_job_api_v1_jobs__job_id__patch
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          format: uuid
          title: Job Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateJobRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_JobResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Job
      tags:
      - jobs
  /api/v1/jobs/{job_id}/retry:
    post:
      description: "Retry a job by delegating to the tenant tool's executor.\n\nUses\
        \ the executor for the tool's category to re-execute with original parameters.\n\
        The executor handles job creation and execution based on its execution mode.\n\
        \nArgs:\n    job_id: Original job UUID\n    tenant_id: From X-Tenant-ID header\n\
        \    trace_id: From trace-id header\n    db: Tenant-scoped database session\n\
        \nReturns:\n    202 Accepted with new job for status polling"
      operationId: retry_job_api_v1_jobs__job_id__retry_post
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          format: uuid
          title: Job Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_JobResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Retry Job
      tags:
      - jobs
  /api/v1/llm-models:
    get:
      description: 'List all supported LLM models with their capabilities.


        This endpoint returns information about all LLM models supported by the platform,

        including their capabilities (temperature support, tool calling, vision, etc.).


        The frontend should use this to:

        - Populate model selection dropdowns

        - Show/hide temperature controls based on model capabilities

        - Display model descriptions and recommendations


        Returns an array of LLM model objects.'
      operationId: list_llm_models_api_v1_llm_models_get
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/LLMModelInfo'
                title: Response List Llm Models Api V1 Llm Models Get
                type: array
          description: Successful Response
      summary: List Llm Models
      tags:
      - llm-models
  /api/v1/storage/browse:
    get:
      description: Browse directory contents in tenant storage.
      operationId: browse_directory_api_v1_storage_browse_get
      parameters:
      - description: Tenant-relative directory path to browse
        in: query
        name: path
        required: false
        schema:
          default: ''
          description: Tenant-relative directory path to browse
          title: Path
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BrowseResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Browse Directory
      tags:
      - storage
  /api/v1/storage/files:
    delete:
      description: Delete a file or directory from tenant storage.
      operationId: delete_file_or_directory_api_v1_storage_files_delete
      parameters:
      - description: Tenant-relative path to delete
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative path to delete
          title: Path
          type: string
      - description: Delete directory recursively
        in: query
        name: recursive
        required: false
        schema:
          default: false
          description: Delete directory recursively
          title: Recursive
          type: boolean
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete File Or Directory
      tags:
      - storage
    get:
      operationId: read_file_api_v1_storage_files_get
      parameters:
      - description: Tenant-relative file path to read
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative file path to read
          title: Path
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileReadResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Read File
      tags:
      - storage
    post:
      operationId: write_file_api_v1_storage_files_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FileWriteRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileWriteResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Write File
      tags:
      - storage
  /api/v1/storage/files/copy:
    post:
      description: Copy a file or directory in tenant storage.
      operationId: copy_file_or_directory_api_v1_storage_files_copy_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CopyRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CopyResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Copy File Or Directory
      tags:
      - storage
  /api/v1/storage/files/download:
    get:
      description: Download a file from tenant storage with true streaming.
      operationId: download_file_api_v1_storage_files_download_get
      parameters:
      - description: Tenant-relative file path to download
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative file path to download
          title: Path
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Download File
      tags:
      - storage
  /api/v1/storage/files/move:
    post:
      description: Move or rename a file or directory in tenant storage.
      operationId: move_file_or_directory_api_v1_storage_files_move_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MoveResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Move File Or Directory
      tags:
      - storage
  /api/v1/storage/files/multipart/abort:
    post:
      description: 'Abort S3 multipart upload and cleanup.


        Cancels the multipart upload and removes all uploaded parts.

        Important for avoiding S3 storage charges for incomplete uploads.'
      operationId: abort_multipart_upload_api_v1_storage_files_multipart_abort_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Request Data
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                title: Response Abort Multipart Upload Api V1 Storage Files Multipart
                  Abort Post
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Abort Multipart Upload
      tags:
      - storage
  /api/v1/storage/files/multipart/complete:
    post:
      description: 'Complete S3 multipart upload.


        Finalizes the multipart upload by combining all uploaded parts.'
      operationId: complete_multipart_upload_api_v1_storage_files_multipart_complete_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Request Data
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                title: Response Complete Multipart Upload Api V1 Storage Files Multipart
                  Complete Post
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Complete Multipart Upload
      tags:
      - storage
  /api/v1/storage/files/upload:
    post:
      description: 'Upload a file to tenant storage (simple upload without progress
        tracking).


        For large files with progress tracking, use the /files/upload-chunked endpoint.'
      operationId: upload_file_api_v1_storage_files_upload_post
      parameters:
      - description: Tenant-relative destination directory path
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative destination directory path
          title: Path
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_file_api_v1_storage_files_upload_post'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Upload File
      tags:
      - storage
  /api/v1/storage/files/upload-chunked:
    post:
      description: "Upload a file with real-time progress tracking (storage-agnostic).\n\
        \nThis endpoint accepts a raw file stream (not multipart) and writes to storage\n\
        (local/S3/GCS/etc.) while reporting progress via Server-Sent Events.\nWorks\
        \ with any fsspec-supported storage.\n\nThe file should be sent as raw binary\
        \ in the request body, with filename\nand file_size as query parameters.\n\
        \nReturns:\n    Server-Sent Events stream with progress updates"
      operationId: upload_file_chunked_api_v1_storage_files_upload_chunked_post
      parameters:
      - description: Tenant-relative destination directory path
        in: query
        name: path
        required: true
        schema:
          description: Tenant-relative destination directory path
          title: Path
          type: string
      - description: Name of the file to upload
        in: query
        name: filename
        required: true
        schema:
          description: Name of the file to upload
          title: Filename
          type: string
      - description: Total file size in bytes
        in: query
        name: file_size
        required: false
        schema:
          default: 0
          description: Total file size in bytes
          title: File Size
          type: integer
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Upload File Chunked
      tags:
      - storage
  /api/v1/storage/files/upload-strategy:
    post:
      description: 'Get optimal upload strategy based on storage backend.


        For S3 (<5GB): Returns presigned URL for direct upload

        For S3 (5GB): Returns multipart upload with presigned URLs for each part

        For local storage: Returns streaming endpoint info


        This eliminates CORS issues and optimizes upload performance.'
      operationId: get_upload_strategy_api_v1_storage_files_upload_strategy_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Request Data
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadStrategyResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Upload Strategy
      tags:
      - storage
  /api/v1/storage/mkdir:
    post:
      description: Create a new directory in tenant storage.
      operationId: create_directory_api_v1_storage_mkdir_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MkdirRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MkdirResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Directory
      tags:
      - storage
  /api/v1/tags:
    get:
      description: "List all available context tags.\n\n    Tags are managed via seed\
        \ data and are not user-editable.\n    They are used by tools (tools.tags)\
        \ and agent configs\n    (agent_configs.context_tags) for tag-based tool discovery.\n\
        \n    Optionally filter by tag_group (e.g., 'domain', 'capability', 'source',\
        \ 'meta')."
      operationId: list_tags_api_v1_tags_get
      parameters:
      - description: 'Filter by tag group: ''domain'', ''capability'', ''source'',
          or ''meta'''
        in: query
        name: tag_group
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: 'Filter by tag group: ''domain'', ''capability'', ''source'',
            or ''meta'''
          title: Tag Group
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_TagResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List tags
      tags:
      - tags
  /api/v1/tags/{slug_id}:
    get:
      description: "Get a single tag by its hierarchical slug_id (e.g., 'data/analyze_data').\n\
        \n    Tags are managed via seed data and are not user-editable."
      operationId: get_tag_api_v1_tags__slug_id__get
      parameters:
      - in: path
        name: slug_id
        required: true
        schema:
          title: Slug Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_TagResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get tag by slug_id
      tags:
      - tags
  /api/v1/tenant-tools:
    get:
      description: List all tools enabled for the tenant with merged configs.
      operationId: list_tenant_tools_api_v1_tenant_tools_get
      parameters:
      - description: If provided, include session-scoped tools for this conversation
        in: query
        name: conversation_set_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: If provided, include session-scoped tools for this conversation
          title: Conversation Set Id
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/TenantToolResponse'
                title: Response List Tenant Tools Api V1 Tenant Tools Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List tenant tools
      tags:
      - tenant-tools
    post:
      description: Enable a tool for the tenant.
      operationId: create_tenant_tool_api_v1_tenant_tools_post
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantToolCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Tenant Tool
      tags:
      - tenant-tools
  /api/v1/tenant-tools/list:
    get:
      description: 'Get simplified list of tenant tools (enabled and disabled) for
        client use.


        By default, session-scoped tools (those with a conversation_set_id) are

        excluded because this endpoint primarily serves the tools management page,

        which should only display permanent tools. Set include_session_scoped=True

        to include them.


        Set enabled_only=True to return only enabled tenant tools (matches MCP

        tools/list and chat semantics: tools the agent can actually use).


        **Tag Filtering**:

        - Use ``?tags=data/analyze_data`` to filter by single tag

        - Use ``?tags=data/analyze_data,results/visualize_and_present`` to filter
        by multiple tags (OR logic)

        - Tags are normalized (case-insensitive, spaces/hyphens to underscores)

        - Returns tools matching ANY of the specified tags

        - Uses the same PostgreSQL ``?|`` operator as MCP ``tools/list`` for consistency

        - Omit ``tags`` (or pass ``undefined``) for all tools; do **not** send ``tags=null``


        When client_capabilities is provided (e.g. visualization.schemas from the
        client),

        the client_visualizer tool''s description and input_parameters_schema are
        updated

        to show the client-supported schemas (same substitution as MCP tools/list).'
      operationId: get_tenant_tools_list_api_v1_tenant_tools_list_get
      parameters:
      - description: Comma-separated tag slug_ids (e.g. 'data/analyze_data,results/visualize_and_present').
          Returns tools matching ANY of the specified tags (OR logic). Tags are normalized
          (case-insensitive, spaces/hyphens to underscores). Omit this parameter for
          all tools; do not send tags=null.
        in: query
        name: tags
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Comma-separated tag slug_ids (e.g. 'data/analyze_data,results/visualize_and_present').
            Returns tools matching ANY of the specified tags (OR logic). Tags are
            normalized (case-insensitive, spaces/hyphens to underscores). Omit this
            parameter for all tools; do not send tags=null.
          title: Tags
      - description: When False (default), only permanent tools are returned. When
          True, session-scoped tools are included alongside permanent tools.
        in: query
        name: include_session_scoped
        required: false
        schema:
          default: false
          description: When False (default), only permanent tools are returned. When
            True, session-scoped tools are included alongside permanent tools.
          title: Include Session Scoped
          type: boolean
      - description: 'Optional JSON object: { "visualization": { "schemas": ["..."]
          } }. When provided, client_visualizer tool description and $schema enum
          are filled with these schemas.'
        in: query
        name: client_capabilities
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: 'Optional JSON object: { "visualization": { "schemas": ["..."]
            } }. When provided, client_visualizer tool description and $schema enum
            are filled with these schemas.'
          title: Client Capabilities
      - description: When True, return only tenant tools with status 'enabled'. When
          False (default), return all tenant tools (enabled and disabled). Use True
          when resolving 'tools available for an agent' (e.g. tools count by tags).
        in: query
        name: enabled_only
        required: false
        schema:
          default: false
          description: When True, return only tenant tools with status 'enabled'.
            When False (default), return all tenant tools (enabled and disabled).
            Use True when resolving 'tools available for an agent' (e.g. tools count
            by tags).
          title: Enabled Only
          type: boolean
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  additionalProperties: true
                  type: object
                title: Response Get Tenant Tools List Api V1 Tenant Tools List Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get tenant tools list (for client)
      tags:
      - tenant-tools
  /api/v1/tenant-tools/{tenant_tool_id}:
    delete:
      description: Permanently remove the tenant-tool association (hard delete). The catalog
        Tool is unchanged; only the TenantTool row is deleted.
      operationId: delete_tenant_tool_api_v1_tenant_tools__tenant_tool_id__delete
      parameters:
      - in: path
        name: tenant_tool_id
        required: true
        schema:
          format: uuid
          title: Tenant Tool Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Tenant Tool
      tags:
      - tenant-tools
    get:
      description: Get a tenant tool by ID.
      operationId: get_tenant_tool_api_v1_tenant_tools__tenant_tool_id__get
      parameters:
      - in: path
        name: tenant_tool_id
        required: true
        schema:
          format: uuid
          title: Tenant Tool Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant Tool
      tags:
      - tenant-tools
    patch:
      description: Update tenant tool status or config.
      operationId: update_tenant_tool_api_v1_tenant_tools__tenant_tool_id__patch
      parameters:
      - in: path
        name: tenant_tool_id
        required: true
        schema:
          format: uuid
          title: Tenant Tool Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantToolUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant Tool
      tags:
      - tenant-tools
  /api/v1/tenant-tools/{tenant_tool_id}/execute:
    post:
      description: Execute a tool using category-based executors with effective config.
      operationId: execute_tenant_tool_api_v1_tenant_tools__tenant_tool_id__execute_post
      parameters:
      - in: path
        name: tenant_tool_id
        required: true
        schema:
          format: uuid
          title: Tenant Tool Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ToolExecuteRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolExecuteResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Execute Tenant Tool
      tags:
      - tenant-tools
  /api/v1/tenants:
    get:
      description: List all tenants.
      operationId: list_tenants_api_v1_tenants_get
      parameters:
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_TenantResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenants
      tags:
      - tenants
    post:
      description: Create a new tenant with optional initial user. Creator is added
        as tenant admin.
      operationId: create_tenant_api_v1_tenants_post
      parameters:
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Tenant
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}:
    delete:
      description: Delete tenant by ID.
      operationId: delete_tenant_api_v1_tenants__tenant_id__delete
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Tenant
      tags:
      - tenants
    get:
      description: Get tenant by ID.
      operationId: get_tenant_api_v1_tenants__tenant_id__get
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tenant
      tags:
      - tenants
    patch:
      description: Update tenant.
      operationId: update_tenant_api_v1_tenants__tenant_id__patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}/config:
    patch:
      description: Update tenant configuration.
      operationId: update_tenant_config_api_v1_tenants__tenant_id__config_patch
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant Config
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}/seed/agent-configs:
    post:
      description: Seed agent configs for a tenant from YAML definitions.
      operationId: seed_tenant_agent_configs_api_v1_tenants__tenant_id__seed_agent_configs_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedAgentConfigsResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant Agent Configs
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}/seed/datasets:
    post:
      description: Seed sample dataset for a tenant.
      operationId: seed_tenant_dataset_api_v1_tenants__tenant_id__seed_datasets_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedDatasetResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant Dataset
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}/seed/external-storage-types:
    post:
      description: Seed external storage types for a tenant from YAML definitions.
      operationId: seed_tenant_external_storage_types_api_v1_tenants__tenant_id__seed_external_storage_types_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedExternalStorageTypesResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant External Storage Types
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}/seed/tools:
    post:
      description: 'Enable existing tools for a tenant.


        This endpoint:

        1. Gets all existing tools from the database (seeded by CD script)

        2. Enables them for the specified tenant


        Note: This endpoint does NOT seed new tools. Tools are seeded globally

        by the CD script. Users can create their own tenant-specific tools via

        the tools API endpoint.'
      operationId: seed_tenant_tools_api_v1_tenants__tenant_id__seed_tools_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedToolsResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Seed Tenant Tools
      tags:
      - tenants
  /api/v1/tenants/{tenant_id}/users:
    get:
      description: List all users in a tenant.
      operationId: list_tenant_users_api_v1_tenants__tenant_id__users_get
      parameters:
      - in: query
        name: status_filter
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status Filter
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_TenantUserDetailResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Tenant Users
      tags:
      - tenant-users
  /api/v1/tenants/{tenant_id}/users/invite:
    post:
      description: Invite a user to join a tenant. Requires tenant admin or root admin.
      operationId: invite_user_to_tenant_api_v1_tenants__tenant_id__users_invite_post
      parameters:
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserInviteRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantUserDetailResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Invite User To Tenant
      tags:
      - tenant-users
  /api/v1/tenants/{tenant_id}/users/{user_id}:
    delete:
      description: Remove a user from a tenant. Requires tenant admin or root admin.
      operationId: remove_user_from_tenant_api_v1_tenants__tenant_id__users__user_id__delete
      parameters:
      - in: path
        name: user_id
        required: true
        schema:
          format: uuid
          title: User Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                title: Response Remove User From Tenant Api V1 Tenants  Tenant Id  Users  User
                  Id  Delete
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Remove User From Tenant
      tags:
      - tenant-users
  /api/v1/tenants/{tenant_id}/users/{user_id}/role:
    patch:
      description: Update a tenant member's role. Requires tenant admin or root admin.
      operationId: update_tenant_user_role_api_v1_tenants__tenant_id__users__user_id__role_patch
      parameters:
      - in: path
        name: user_id
        required: true
        schema:
          format: uuid
          title: User Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TenantUserRoleUpdateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantUserDetailResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tenant User Role
      tags:
      - tenant-users
  /api/v1/tool-categories:
    get:
      description: "List all tool categories (read-only).\n\n    Categories are managed\
        \ via migrations, not through API endpoints."
      operationId: list_tool_categories_api_v1_tool_categories_get
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_ToolCategoryResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List tool categories
      tags:
      - tool-categories
  /api/v1/tool-categories/{category_id}:
    get:
      description: "Get a tool category by ID (read-only).\n\n    Categories are managed\
        \ via migrations, not through API endpoints."
      operationId: get_tool_category_api_v1_tool_categories__category_id__get
      parameters:
      - in: path
        name: category_id
        required: true
        schema:
          format: uuid
          title: Category Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_ToolCategoryResponse_'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get tool category
      tags:
      - tool-categories
  /api/v1/tools:
    get:
      description: "List tools enabled for the calling tenant, optionally filtered\
        \ by tags or tenant tool IDs.\n\n    This endpoint respects tenant isolation\
        \ - only tools that have been\n    enabled for the calling tenant (via TenantTool)\
        \ are returned.\n\n    For tools with tenant-specific configs, use /api/v1/tenant-tools/list\
        \ instead.\n\n    **Tag Filtering**:\n    - Use `?tags=data_transformer` to\
        \ filter by single tag\n    - Use `?tags=data_transformer,seismic` to filter\
        \ by multiple tags (OR logic)\n    - Tags are normalized (case-insensitive,\
        \ spaces/hyphens  underscores)\n    - Returns tools matching ANY of the specified\
        \ tags\n\n    **Tenant Tool ID Filtering**:\n    - Use `?tenant_tool_ids=uuid1&tenant_tool_ids=uuid2`\
        \ to filter by specific tenant tool IDs\n    - Returns only tools associated\
        \ with the specified tenant tool IDs\n    - Can be combined with tag filtering\
        \ (both filters apply)\n\n    **Response**:\n    - Each tool includes `tags`\
        \ (normalized) and `tags_display` (human-readable)"
      operationId: list_tools_api_v1_tools_get
      parameters:
      - in: query
        name: tags
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
      - description: Filter by tenant tool IDs
        in: query
        name: tenant_tool_ids
        required: false
        schema:
          anyOf:
          - items:
              format: uuid
              type: string
            type: array
          - type: 'null'
          description: Filter by tenant tool IDs
          title: Tenant Tool Ids
      - description: If provided, include session-scoped tools for this conversation
        in: query
        name: conversation_set_id
        required: false
        schema:
          anyOf:
          - format: uuid
            type: string
          - type: 'null'
          description: If provided, include session-scoped tools for this conversation
          title: Conversation Set Id
      - in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          title: Page
          type: integer
      - in: query
        name: size
        required: false
        schema:
          default: 10
          maximum: 100
          minimum: 1
          title: Size
          type: integer
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse_list_ToolResponse__'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List tools
      tags:
      - tools
    post:
      description: 'Create a new tool and automatically enable it for the calling
        tenant.


        The tool is created as tenant-agnostic in the `tools` table, and a

        `TenantTool` association is automatically created to enable it for

        the calling tenant.


        To enable an existing tool for additional tenants, use the

        /api/v1/tenant-tools endpoint.'
      operationId: create_tool_api_v1_tools_post
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ToolCreate'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create Tool
      tags:
      - tools
  /api/v1/tools/mcp/preview:
    post:
      description: 'Preview tools available from an MCP server.


        This endpoint fetches the list of tools from the specified MCP server URL

        without creating any database records. Useful for previewing tools before

        creating an MCP tool definition.'
      operationId: preview_mcp_tools_api_v1_tools_mcp_preview_post
      parameters:
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MCPPreviewRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/MCPToolPreview'
                title: Response Preview Mcp Tools Api V1 Tools Mcp Preview Post
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Preview Mcp Tools
      tags:
      - tools
  /api/v1/tools/{tool_id}:
    delete:
      description: 'Delete a tool (soft delete by setting status to ''archived'').


        Requires the tool to be associated with the calling tenant via TenantTool.'
      operationId: delete_tool_api_v1_tools__tool_id__delete
      parameters:
      - in: path
        name: tool_id
        required: true
        schema:
          format: uuid
          title: Tool Id
          type: string
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Tool
      tags:
      - tools
    get:
      description: 'Get a tool by ID (respects tenant isolation).


        Returns the Tool entity if it''s enabled for the calling tenant.

        To get a tool with tenant-specific config, use /api/v1/tenant-tools endpoints
        instead.'
      operationId: get_tool_api_v1_tools__tool_id__get
      parameters:
      - in: path
        name: tool_id
        required: true
        schema:
          format: uuid
          title: Tool Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Tool
      tags:
      - tools
    patch:
      description: 'Update a tool.


        Supports promoting session-scoped tools to permanent by setting conversation_set_id
        to null.

        Only session-scoped tools can be promoted (tools that already have conversation_set_id=None
        cannot be promoted).


        Note: Tools are tenant-agnostic, but updates require a TenantTool association
        for the calling tenant.'
      operationId: update_tool_api_v1_tools__tool_id__patch
      parameters:
      - in: path
        name: tool_id
        required: true
        schema:
          format: uuid
          title: Tool Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ToolUpdate'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Tool
      tags:
      - tools
  /api/v1/users/me:
    get:
      description: Get current authenticated user's profile and tenant memberships.
      operationId: get_current_user_info_api_v1_users_me_get
      parameters:
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CurrentUserResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Current User Info
      tags:
      - users
  /api/v1/users/me/tenants/{tenant_id}/select:
    post:
      description: "Select a tenant as the active one for the current user.\n\nSets\
        \ the selected tenant to 'active' and all other 'active' tenants to 'accepted'.\n\
        Leaves 'invited' tenants unchanged.\n\nArgs:\n    tenant_id: UUID of the tenant\
        \ to select\n    current_user: Authenticated user\n    trace_id: Trace ID\
        \ for logging\n    db: Database session\n\nReturns:\n    Updated user info\
        \ with tenant memberships\n\nRaises:\n    HTTPException: If tenant not found\
        \ or user is not a member"
      operationId: select_tenant_api_v1_users_me_tenants__tenant_id__select_post
      parameters:
      - in: path
        name: tenant_id
        required: true
        schema:
          format: uuid
          title: Tenant Id
          type: string
      - in: header
        name: Authorization
        required: true
        schema:
          title: Authorization
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CurrentUserResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Select Tenant
      tags:
      - users
  /healthz:
    get:
      operationId: healthz_healthz_get
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
      summary: Healthz
  /mcp/tools:
    post:
      description: 'Handle MCP JSON-RPC requests.


        Supports the methods registered in ``_METHOD_HANDLERS``.

        All errors are returned as JSON-RPC 2.0 compliant error responses.'
      operationId: handle_mcp_request_mcp_tools_post
      parameters:
      - in: header
        name: X-Tenant-ID
        required: true
        schema:
          title: X-Tenant-Id
          type: string
      - in: header
        name: trace-id
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Trace-Id
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Request
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                title: Response Handle Mcp Request Mcp Tools Post
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Handle Mcp Request
      tags:
      - mcp
  /mcp/tools/health:
    get:
      description: "Health check endpoint for the tools MCP service.\n\nReturns:\n\
        \    Health status with service information"
      operationId: health_check_mcp_tools_health_get
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                title: Response Health Check Mcp Tools Health Get
                type: object
          description: Successful Response
      summary: Health Check
      tags:
      - mcp
  /readyz:
    get:
      operationId: readyz_readyz_get
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
      summary: Readyz
  /version:
    get:
      description: Return version information about the deployed application.
      operationId: version_version_get
      responses:
        '200':
          content:
            application/json:
              schema: {}
          description: Successful Response
      summary: Version
